/**
 * SocketCluster JavaScript client v14.3.2
 */
!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).socketCluster=t()}(function(){return function n(o,i,s){function a(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(u)return u(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return a(o[e][1][t]||t)},r,r.exports,n,o,i,s)}return i[e].exports}for(var u="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e){var r=t("./lib/scclientsocket"),n=t("./lib/factory");e.exports.factory=n,e.exports.SCClientSocket=r,e.exports.Emitter=t("component-emitter"),e.exports.create=function(t){return n.create(t)},e.exports.connect=e.exports.create,e.exports.destroy=function(t){return n.destroy(t)},e.exports.clients=n.clients,e.exports.version="14.3.1"},{"./lib/factory":3,"./lib/scclientsocket":5,"component-emitter":12}],2:[function(t,e){!function(o){!function(){function t(){this._internalStorage={},this.isLocalStorageEnabled=this._checkLocalStorageEnabled()}t.prototype._checkLocalStorageEnabled=function(){var e;try{o.localStorage,o.localStorage.setItem("__scLocalStorageTest",1),o.localStorage.removeItem("__scLocalStorageTest")}catch(t){e=t}return!e},t.prototype.saveToken=function(t,e,r,n){this.isLocalStorageEnabled&&o.localStorage?o.localStorage.setItem(t,e):this._internalStorage[t]=e,n&&n(null,e)},t.prototype.removeToken=function(t,e){var r;this.loadToken(t,function(t,e){r=e}),this.isLocalStorageEnabled&&o.localStorage?o.localStorage.removeItem(t):delete this._internalStorage[t],e&&e(null,r)},t.prototype.loadToken=function(t,e){t=this.isLocalStorageEnabled&&o.localStorage?o.localStorage.getItem(t):this._internalStorage[t]||null;e(null,t)},e.exports.AuthEngine=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,r){!function(h){!function(){var s=e("./scclientsocket"),t=e("sc-errors"),a=e("uuid"),u=t.InvalidArgumentsError,c={};r.exports={create:function(t){if((t=t||{}).host&&!t.host.match(/[^:]+:\d{2,5}/))throw new u('The host option should include both the hostname and the port number in the format "hostname:port"');if(t.host&&t.hostname)throw new u('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and hostname options together');if(t.host&&t.port)throw new u('The host option should already include the hostname and the port number in the format "hostname:port" - Because of this, you should never use host and port options together');var e,r,n,o=h.location&&"https:"===location.protocol,i={port:(r=o,r=null==(e=t).secure?r:e.secure,e.port||(h.location&&location.port?location.port:r?443:80)),hostname:h.location&&location.hostname||"localhost",path:"/socketcluster/",secure:o,autoConnect:!0,autoReconnect:!0,autoSubscribeOnConnect:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authEngine:null,authTokenName:"socketCluster.authToken",binaryType:"arraybuffer",multiplex:!0,pubSubBatchDuration:null,cloneData:!1};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);if(i.clientMap=c,!1!==i.multiplex)return i.clientId=function(t){var e=t.secure?"https://":"http://",r="";if(t.query)if("string"==typeof t.query)r=t.query;else{var n,o=[],i=t.query;for(n in i)i.hasOwnProperty(n)&&o.push(n+"="+i[n]);o.length&&(r="?"+o.join("&"))}return e+(t.host||t.hostname+":"+t.port)+t.path+r}(i),c[i.clientId]?i.autoConnect&&c[i.clientId].connect():c[i.clientId]=new s(i),c[i.clientId];i.clientId=a.v4();o=new s(i);return c[i.clientId]=o},destroy:function(t){t.destroy()},clients:c}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./scclientsocket":5,"sc-errors":21,uuid:23}],4:[function(t,e){var r=t("sc-errors"),n=r.InvalidActionError,t=function(t,e){this.socket=t,this.id=e,this.sent=!1};t.prototype._respond=function(t){if(this.sent)throw new n("Response "+this.id+" has already been sent");this.sent=!0,this.socket.send(this.socket.encode(t))},t.prototype.end=function(t){var e;this.id&&(e={rid:this.id},void 0!==t&&(e.data=t),this._respond(e))},t.prototype.error=function(t,e){this.id&&(t=r.dehydrateError(t),t={rid:this.id,error:t},void 0!==e&&(t.data=e),this._respond(t))},t.prototype.callback=function(t,e){t?this.error(t,e):this.end(e)},e.exports.Response=t},{"sc-errors":21}],5:[function(E,v){!function(m){!function(){var i=E("component-emitter"),n=E("sc-channel").SCChannel;E("./response").Response;function o(t){var e=this;function r(t){if(e[t]>o)throw new p("The "+t+" value provided exceeded the maximum amount allowed")}i.call(this),this.id=null,this.state=this.CLOSED,this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.preparingPendingSubscriptions=!1,this.clientId=t.clientId,this.connectTimeout=t.connectTimeout,this.ackTimeout=t.ackTimeout,this.channelPrefix=t.channelPrefix||null,this.disconnectOnUnload=null==t.disconnectOnUnload||t.disconnectOnUnload,this.authTokenName=t.authTokenName,this.pingTimeout=this.ackTimeout,this.pingTimeoutDisabled=!!t.pingTimeoutDisabled,this.active=!0,this._clientMap=t.clientMap||{};var n,o=Math.pow(2,31)-1;r("connectTimeout"),r("ackTimeout"),this._localEvents={connect:1,connectAbort:1,close:1,disconnect:1,message:1,error:1,raw:1,kickOut:1,subscribe:1,unsubscribe:1,subscribeStateChange:1,authStateChange:1,authenticate:1,deauthenticate:1,removeAuthToken:1,subscribeRequest:1},this.connectAttempts=0,this._emitBuffer=new c,this.channels={},this.options=t,this._cid=1,this.options.callIdGenerator=function(){return e._cid++},this.options.autoReconnect&&(null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={}),null==(n=this.options.autoReconnectOptions).initialDelay&&(n.initialDelay=1e4),null==n.randomness&&(n.randomness=1e4),null==n.multiplier&&(n.multiplier=1.5),null==n.maxDelay&&(n.maxDelay=6e4)),null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new s,this.options.codecEngine?this.codec=this.options.codecEngine:this.codec=a,this.options.protocol&&(n=new p('The "protocol" option does not affect socketcluster-client. If you want to utilize SSL/TLS - use "secure" option instead'),this._onSCError(n)),this.options.path=this.options.path.replace(/\/$/,"")+"/",this.options.query=t.query||{},"string"==typeof this.options.query&&(this.options.query=u.parse(this.options.query)),this._channelEmitter=new i,this._unloadHandler=function(){e.disconnect()},b&&this.disconnectOnUnload&&m.addEventListener&&m.addEventListener("beforeunload",this._unloadHandler,!1),(this._clientMap[this.clientId]=this).options.autoConnect&&this.connect()}var s=E("./auth").AuthEngine,a=E("sc-formatter"),e=E("./sctransport").SCTransport,u=E("querystring"),c=E("linked-list"),r=E("buffer/").Buffer,h=E("clone"),f=E("sc-errors"),p=f.InvalidArgumentsError,t=f.InvalidMessageError,l=f.InvalidActionError,d=f.SocketProtocolError,y=f.TimeoutError,g=f.BadConnectionError,b="undefined"!=typeof window;o.prototype=Object.create(i.prototype),o.CONNECTING=o.prototype.CONNECTING=e.prototype.CONNECTING,o.OPEN=o.prototype.OPEN=e.prototype.OPEN,o.CLOSED=o.prototype.CLOSED=e.prototype.CLOSED,o.AUTHENTICATED=o.prototype.AUTHENTICATED="authenticated",o.UNAUTHENTICATED=o.prototype.UNAUTHENTICATED="unauthenticated",o.PENDING=o.prototype.PENDING="pending",o.ignoreStatuses=f.socketProtocolIgnoreStatuses,o.errorStatuses=f.socketProtocolErrorStatuses,o.prototype._privateEventHandlerMap={"#publish":function(t){var e=this._undecorateChannelName(t.channel);this.isSubscribed(e,!0)&&this._channelEmitter.emit(e,t.data)},"#kickOut":function(t){var e=this._undecorateChannelName(t.channel),r=this.channels[e];r&&(i.prototype.emit.call(this,"kickOut",t.message,e),r.emit("kickOut",t.message,e),this._triggerChannelUnsubscribe(r))},"#setAuthToken":function(e,r){var n=this;e?this.auth.saveToken(this.authTokenName,e.token,{},function(t){t?(r.error(t),n._onSCError(t)):(n._changeToAuthenticatedState(e.token),r.end())}):r.error(new t("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(t,r){var n=this;this.auth.removeToken(this.authTokenName,function(t,e){t?(r.error(t),n._onSCError(t)):(i.prototype.emit.call(n,"removeAuthToken",e),n._changeToUnauthenticatedStateAndClearTokens(),r.end())})},"#disconnect":function(t){this.transport.close(t.code,t.data)}},o.prototype.getState=function(){return this.state},o.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},o.prototype.deauthenticate=function(r){var n=this;this.auth.removeToken(this.authTokenName,function(t,e){t?n._onSCError(t):(i.prototype.emit.call(n,"removeAuthToken",e),n.state!==n.CLOSED&&n.emit("#removeAuthToken"),n._changeToUnauthenticatedStateAndClearTokens()),r&&r(t)})},o.prototype.connect=o.prototype.open=function(){var t,n=this;this.active?this.state===this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,i.prototype.emit.call(this,"connecting"),this.transport&&this.transport.off(),this.transport=new e(this.auth,this.codec,this.options),this.transport.on("open",function(t){n.state=n.OPEN,n._onSCOpen(t)}),this.transport.on("error",function(t){n._onSCError(t)}),this.transport.on("close",function(t,e){n.state=n.CLOSED,n._onSCClose(t,e)}),this.transport.on("openAbort",function(t,e){n.state=n.CLOSED,n._onSCClose(t,e,!0)}),this.transport.on("event",function(t,e,r){n._onSCEvent(t,e,r)})):(t=new l("Cannot connect a destroyed client"),this._onSCError(t))},o.prototype.reconnect=function(t,e){this.disconnect(t,e),this.connect()},o.prototype.disconnect=function(t,e){if("number"!=typeof(t=t||1e3))throw new p("If specified, the code argument must be a number");this.state===this.OPEN||this.state===this.CONNECTING?this.transport.close(t,e):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},o.prototype.destroy=function(t,e){b&&m.removeEventListener&&m.removeEventListener("beforeunload",this._unloadHandler,!1),this.active=!1,this.disconnect(t,e),delete this._clientMap[this.clientId]},o.prototype._changeToUnauthenticatedStateAndClearTokens=function(){var t,e;this.authState!==this.UNAUTHENTICATED&&(e=this.authState,t=this.signedAuthToken,this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null,e={oldState:e,newState:this.authState},i.prototype.emit.call(this,"authStateChange",e),i.prototype.emit.call(this,"deauthenticate",t))},o.prototype._changeToAuthenticatedState=function(t){var e;this.signedAuthToken=t,this.authToken=this._extractAuthTokenData(t),this.authState!==this.AUTHENTICATED&&(e=this.authState,this.authState=this.AUTHENTICATED,e={oldState:e,newState:this.authState,signedAuthToken:t,authToken:this.authToken},this.preparingPendingSubscriptions||this.processPendingSubscriptions(),i.prototype.emit.call(this,"authStateChange",e)),i.prototype.emit.call(this,"authenticate",t)},o.prototype.decodeBase64=function(t){return r.from(t,"base64").toString("utf8")},o.prototype.encodeBase64=function(t){return r.from(t,"utf8").toString("base64")},o.prototype._extractAuthTokenData=function(e){e=(e||"").split(".")[1];if(null!=e){e=e;try{return e=this.decodeBase64(e),JSON.parse(e)}catch(t){return e}}return null},o.prototype.getAuthToken=function(){return this.authToken},o.prototype.getSignedAuthToken=function(){return this.signedAuthToken},o.prototype.authenticate=function(r,n){var o=this;this.emit("#authenticate",r,function(t,e){e&&null!=e.isAuthenticated?e.authError&&(e.authError=f.hydrateError(e.authError)):e={isAuthenticated:o.authState,authError:null},t?("BadConnectionError"!==t.name&&"TimeoutError"!==t.name&&o._changeToUnauthenticatedStateAndClearTokens(),n&&n(t,e)):o.auth.saveToken(o.authTokenName,r,{},function(t){t&&o._onSCError(t),e.isAuthenticated?o._changeToAuthenticatedState(r):o._changeToUnauthenticatedStateAndClearTokens(),n&&n(t,e)})})},o.prototype._tryReconnect=function(t){var e,r=this,n=this.connectAttempts++,o=this.options.autoReconnectOptions;(t=null==t||0<n?(e=Math.round(o.initialDelay+(o.randomness||0)*Math.random()),Math.round(e*Math.pow(o.multiplier,n))):t)>o.maxDelay&&(t=o.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=t,this._reconnectTimeoutRef=setTimeout(function(){r.connect()},t)},o.prototype._onSCOpen=function(t){var e=this;this.preparingPendingSubscriptions=!0,t?(this.id=t.id,this.pingTimeout=t.pingTimeout,this.transport.pingTimeout=this.pingTimeout,t.isAuthenticated?this._changeToAuthenticatedState(t.authToken):this._changeToUnauthenticatedStateAndClearTokens()):this._changeToUnauthenticatedStateAndClearTokens(),this.connectAttempts=0,this.options.autoSubscribeOnConnect&&this.processPendingSubscriptions(),i.prototype.emit.call(this,"connect",t,function(){e.processPendingSubscriptions()}),this.state===this.OPEN&&this._flushEmitBuffer()},o.prototype._onSCError=function(t){var e=this;setTimeout(function(){if(e.listeners("error").length<1)throw t;i.prototype.emit.call(e,"error",t)},0)},o.prototype._suspendSubscriptions=function(){var t,e,r;for(r in this.channels)this.channels.hasOwnProperty(r)&&(e=(t=this.channels[r]).state===t.SUBSCRIBED||t.state===t.PENDING?t.PENDING:t.UNSUBSCRIBED,this._triggerChannelUnsubscribe(t,e))},o.prototype._abortAllPendingEventsDueToBadConnection=function(t){for(var e=this._emitBuffer.head;e;){var r=e.next,n=e.data;clearTimeout(n.timeout),delete n.timeout,e.detach();var e=r,o=n.callback;o&&(delete n.callback,r="Event '"+n.event+"' was aborted due to a bad connection",r=new g(r,t),o.call(n,r,n)),n.cid&&this.transport.cancelPendingResponse(n.cid)}},o.prototype._onSCClose=function(t,e,r){this.id=null,this.transport&&this.transport.off(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._suspendSubscriptions(),this._abortAllPendingEventsDueToBadConnection(r?"connectAbort":"disconnect"),this.options.autoReconnect&&(4e3===t||4001===t||1005===t?this._tryReconnect(0):1e3!==t&&t<4500&&this._tryReconnect()),r?i.prototype.emit.call(this,"connectAbort",t,e):i.prototype.emit.call(this,"disconnect",t,e),i.prototype.emit.call(this,"close",t,e),o.ignoreStatuses[t]||(e=e?"Socket connection closed with status code "+t+" and reason: "+e:"Socket connection closed with status code "+t,t=new d(o.errorStatuses[t]||e,t),this._onSCError(t))},o.prototype._onSCEvent=function(t,e,r){var n=this._privateEventHandlerMap[t];n?n.call(this,e,r):i.prototype.emit.call(this,t,e,function(){r&&r.callback.apply(r,arguments)})},o.prototype.decode=function(t){return this.transport.decode(t)},o.prototype.encode=function(t){return this.transport.encode(t)},o.prototype._flushEmitBuffer=function(){for(var t=this._emitBuffer.head;t;){var e=t.next,r=t.data;t.detach(),this.transport.emitObject(r),t=e}},o.prototype._handleEventAckTimeout=function(t,e){e&&e.detach(),delete t.timeout;var r=t.callback;r&&(delete t.callback,e=new y("Event response for '"+t.event+"' timed out"),r.call(t,e,t)),t.cid&&this.transport.cancelPendingResponse(t.cid)},o.prototype._emit=function(t,e,r){var n=this;this.state===this.CLOSED&&this.connect();var o={event:t,callback:r},i=new c.Item;this.options.cloneData?o.data=h(e):o.data=e,(i.data=o).timeout=setTimeout(function(){n._handleEventAckTimeout(o,i)},this.ackTimeout),this._emitBuffer.append(i),this.state===this.OPEN&&this._flushEmitBuffer()},o.prototype.send=function(t){this.transport.send(t)},o.prototype.emit=function(t,e,r){null==this._localEvents[t]?this._emit(t,e,r):"error"===t?i.prototype.emit.call(this,t,e):(t=new l('The "'+t+'" event is reserved and cannot be emitted on a client socket'),this._onSCError(t))},o.prototype.publish=function(t,e,r){e={channel:this._decorateChannelName(t),data:e};this.emit("#publish",e,r)},o.prototype._triggerChannelSubscribe=function(t,e){var r,n=t.name;t.state!==t.SUBSCRIBED&&(r=t.state,t.state=t.SUBSCRIBED,r={channel:n,oldState:r,newState:t.state,subscriptionOptions:e},t.emit("subscribeStateChange",r),t.emit("subscribe",n,e),i.prototype.emit.call(this,"subscribeStateChange",r),i.prototype.emit.call(this,"subscribe",n,e))},o.prototype._triggerChannelSubscribeFail=function(t,e,r){var n=e.name,o=!e.waitForAuth||this.authState===this.AUTHENTICATED;e.state!==e.UNSUBSCRIBED&&o&&(e.state=e.UNSUBSCRIBED,e.emit("subscribeFail",t,n,r),i.prototype.emit.call(this,"subscribeFail",t,n,r))},o.prototype._cancelPendingSubscribeCallback=function(t){null!=t._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(t._pendingSubscriptionCid),delete t._pendingSubscriptionCid)},o.prototype._decorateChannelName=function(t){return t=this.channelPrefix?this.channelPrefix+t:t},o.prototype._undecorateChannelName=function(t){return this.channelPrefix&&0===t.indexOf(this.channelPrefix)?t.replace(this.channelPrefix,""):t},o.prototype._trySubscribe=function(e){var r,n=this,t=!e.waitForAuth||this.authState===this.AUTHENTICATED;this.state===this.OPEN&&!this.preparingPendingSubscriptions&&null==e._pendingSubscriptionCid&&t&&(t={noTimeout:!0},r={channel:this._decorateChannelName(e.name)},e.waitForAuth&&(t.waitForAuth=!0,r.waitForAuth=t.waitForAuth),e.data&&(r.data=e.data),e.batch&&(t.batch=!0,r.batch=!0),e._pendingSubscriptionCid=this.transport.emit("#subscribe",r,t,function(t){delete e._pendingSubscriptionCid,t?n._triggerChannelSubscribeFail(t,e,r):n._triggerChannelSubscribe(e,r)}),i.prototype.emit.call(this,"subscribeRequest",e.name,r))},o.prototype.subscribe=function(t,e){var r=this.channels[t];return r?e&&r.setOptions(e):(r=new n(t,this,e),this.channels[t]=r),r.state===r.UNSUBSCRIBED&&(r.state=r.PENDING,this._trySubscribe(r)),r},o.prototype._triggerChannelUnsubscribe=function(t,e){var r=t.name,n=t.state;t.state=e||t.UNSUBSCRIBED,this._cancelPendingSubscribeCallback(t),n===t.SUBSCRIBED&&(n={channel:r,oldState:n,newState:t.state},t.emit("subscribeStateChange",n),t.emit("unsubscribe",r),i.prototype.emit.call(this,"subscribeStateChange",n),i.prototype.emit.call(this,"unsubscribe",r))},o.prototype._tryUnsubscribe=function(t){var e;this.state===this.OPEN&&(e={noTimeout:!0},t.batch&&(e.batch=!0),this._cancelPendingSubscribeCallback(t),t=this._decorateChannelName(t.name),this.transport.emit("#unsubscribe",t,e))},o.prototype.unsubscribe=function(t){t=this.channels[t];t&&t.state!==t.UNSUBSCRIBED&&(this._triggerChannelUnsubscribe(t),this._tryUnsubscribe(t))},o.prototype.channel=function(t,e){var r=this.channels[t];return r||(r=new n(t,this,e),this.channels[t]=r),r},o.prototype.destroyChannel=function(t){var e=this.channels[t];e&&(e.unwatch(),e.unsubscribe(),delete this.channels[t])},o.prototype.subscriptions=function(t){var e,r,n=[];for(r in this.channels)this.channels.hasOwnProperty(r)&&(e=this.channels[r],(t?e&&(e.state===e.SUBSCRIBED||e.state===e.PENDING):e&&e.state===e.SUBSCRIBED)&&n.push(r));return n},o.prototype.isSubscribed=function(t,e){t=this.channels[t];return e?!!t&&(t.state===t.SUBSCRIBED||t.state===t.PENDING):!!t&&t.state===t.SUBSCRIBED},o.prototype.processPendingSubscriptions=function(){var e=this;this.preparingPendingSubscriptions=!1;var t,r,n=[];for(t in this.channels)!this.channels.hasOwnProperty(t)||(r=this.channels[t]).state===r.PENDING&&n.push(r);n.sort(function(t,e){t=t.priority||0,e=e.priority||0;return e<t?-1:t<e?1:0}),n.forEach(function(t){e._trySubscribe(t)})},o.prototype.watch=function(t,e){if("function"!=typeof e)throw new p("No handler function was provided");this._channelEmitter.on(t,e)},o.prototype.unwatch=function(t,e){e?this._channelEmitter.removeListener(t,e):this._channelEmitter.removeAllListeners(t)},o.prototype.watchers=function(t){return this._channelEmitter.listeners(t)},v.exports=o}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./auth":2,"./response":4,"./sctransport":6,"buffer/":10,clone:11,"component-emitter":12,"linked-list":15,querystring:18,"sc-channel":19,"sc-errors":21,"sc-formatter":22}],6:[function(h,f){!function(e){!function(){function t(t,e,r){var n=this;this.state=this.CLOSED,this.auth=t,this.codec=e,this.options=r,this.connectTimeout=r.connectTimeout,this.pingTimeout=r.ackTimeout,this.pingTimeoutDisabled=!!r.pingTimeoutDisabled,this.callIdGenerator=r.callIdGenerator,this.authTokenName=r.authTokenName,this._pingTimeoutTicker=null,this._callbackMap={},this._batchSendList=[],this.state=this.CONNECTING,r=this.uri(),(r=s(r,this.options)).binaryType=this.options.binaryType,(this.socket=r).onopen=function(){n._onOpen()},r.onclose=function(t){var e=null==t.code?1005:t.code;n._onClose(e,t.reason)},r.onmessage=function(t){n._onMessage(t.data)},r.onerror=function(){n.state===n.CONNECTING&&n._onClose(1006)},this._connectTimeoutRef=setTimeout(function(){n._onClose(4007),n.socket.close(4007)},this.connectTimeout)}var r,o=h("component-emitter"),i=h("./response").Response,n=h("querystring"),s=e.WebSocket?(r=e.WebSocket,function(t){return new r(t)}):(r=h("ws"),function(t,e){return new r(t,null,e)}),a=h("sc-errors"),u=a.TimeoutError,c=a.BadConnectionError;t.prototype=Object.create(o.prototype),t.CONNECTING=t.prototype.CONNECTING="connecting",t.OPEN=t.prototype.OPEN="open",t.CLOSED=t.prototype.CLOSED="closed",t.prototype.uri=function(){var t,e=this.options.query||{},r=this.options.secure?"wss":"ws";return this.options.timestampRequests&&(e[this.options.timestampParam]=(new Date).getTime()),(e=n.encode(e)).length&&(e="?"+e),r+"://"+(this.options.host||(t="",this.options.port&&("wss"==r&&443!==this.options.port||"ws"==r&&80!==this.options.port)&&(t=":"+this.options.port),this.options.hostname+t))+this.options.path+e},t.prototype._onOpen=function(){var n=this;clearTimeout(this._connectTimeoutRef),this._resetPingTimeout(),this._handshake(function(t,e){var r;t?(r=e&&e.code?e.code:4003,n._onError(t),n._onClose(r,t.toString()),n.socket.close(r)):(n.state=n.OPEN,o.prototype.emit.call(n,"open",e),n._resetPingTimeout())})},t.prototype._handshake=function(n){var e=this;this.auth.loadToken(this.authTokenName,function(t,r){t?n(t):e.emit("#handshake",{authToken:r},{force:!0},function(t,e){e&&(e.authToken=r,e.authError&&(e.authError=a.hydrateError(e.authError))),n(t,e)})})},t.prototype._abortAllPendingEventsDueToBadConnection=function(t){for(var e in this._callbackMap){var r,n;this._callbackMap.hasOwnProperty(e)&&(r=this._callbackMap[e],delete this._callbackMap[e],clearTimeout(r.timeout),delete r.timeout,n="Event '"+r.event+"' was aborted due to a bad connection",e=new c(n,t),n=r.callback,delete r.callback,n.call(r,e,r))}},t.prototype._onClose=function(t,e){delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),clearTimeout(this._pingTimeoutTicker),clearTimeout(this._batchTimeout),this.state===this.OPEN?(this.state=this.CLOSED,o.prototype.emit.call(this,"close",t,e),this._abortAllPendingEventsDueToBadConnection("disconnect")):this.state===this.CONNECTING&&(this.state=this.CLOSED,o.prototype.emit.call(this,"openAbort",t,e),this._abortAllPendingEventsDueToBadConnection("connectAbort"))},t.prototype._handleEventObject=function(t,e){var r,n;t&&null!=t.event?(n=new i(this,t.cid),o.prototype.emit.call(this,"event",t.event,t.data,n)):t&&null!=t.rid?(r=this._callbackMap[t.rid])&&(clearTimeout(r.timeout),delete r.timeout,delete this._callbackMap[t.rid],r.callback&&(n=a.hydrateError(t.error),r.callback(n,t.data))):o.prototype.emit.call(this,"event","raw",e)},t.prototype._onMessage=function(t){o.prototype.emit.call(this,"event","message",t);var e=this.decode(t);if("#1"===e)this._resetPingTimeout(),this.socket.readyState===this.socket.OPEN&&this.sendObject("#2");else if(Array.isArray(e))for(var r=e.length,n=0;n<r;n++)this._handleEventObject(e[n],t);else this._handleEventObject(e,t)},t.prototype._onError=function(t){o.prototype.emit.call(this,"error",t)},t.prototype._resetPingTimeout=function(){var t;this.pingTimeoutDisabled||(t=this,(new Date).getTime(),clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout(function(){t._onClose(4e3),t.socket.close(4e3)},this.pingTimeout))},t.prototype.getBytesReceived=function(){return this.socket.bytesReceived},t.prototype.close=function(t,e){t=t||1e3,this.state===this.OPEN?(this.emit("#disconnect",{code:t,data:e}),this._onClose(t,e),this.socket.close(t)):this.state===this.CONNECTING&&(this._onClose(t,e),this.socket.close(t))},t.prototype.emitObject=function(t,e){var r={event:t.event,data:t.data};return t.callback&&(r.cid=t.cid=this.callIdGenerator(),this._callbackMap[t.cid]=t),this.sendObject(r,e),t.cid||null},t.prototype._handleEventAckTimeout=function(t){t.cid&&delete this._callbackMap[t.cid],delete t.timeout;var e,r=t.callback;r&&(delete t.callback,e=new u("Event response for '"+t.event+"' timed out"),r.call(t,e,t))},t.prototype.emit=function(t,e,r,n){var o,i=this;n?(o=r,a=n):r instanceof Function?(o={},a=r):o=r;var s={event:t,data:e,callback:a};a&&!o.noTimeout&&(s.timeout=setTimeout(function(){i._handleEventAckTimeout(s)},this.options.ackTimeout));var a=null;return a=this.state===this.OPEN||o.force?this.emitObject(s,o):a},t.prototype.cancelPendingResponse=function(t){delete this._callbackMap[t]},t.prototype.decode=function(t){return this.codec.decode(t)},t.prototype.encode=function(t){return this.codec.encode(t)},t.prototype.send=function(t){this.socket.readyState!==this.socket.OPEN?this._onClose(1005):this.socket.send(t)},t.prototype.serializeObject=function(t){var e,r;try{e=this.encode(t)}catch(t){this._onError(r=t)}return r?null:e},t.prototype.sendObjectBatch=function(t){var e=this;this._batchSendList.push(t),this._batchTimeout||(this._batchTimeout=setTimeout(function(){var t;delete e._batchTimeout,e._batchSendList.length&&(null!=(t=e.serializeObject(e._batchSendList))&&e.send(t),e._batchSendList=[])},this.options.pubSubBatchDuration||0))},t.prototype.sendObjectSingle=function(t){t=this.serializeObject(t);null!=t&&this.send(t)},t.prototype.sendObject=function(t,e){e&&e.batch?this.sendObjectBatch(t):this.sendObjectSingle(t)},f.exports.SCTransport=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./response":4,"component-emitter":12,querystring:18,"sc-errors":21,ws:7}],7:[function(t,e){var r="undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof window&&window||function(){return this}(),n=r.WebSocket||r.MozWebSocket;function o(t,e){t=e?new n(t,e):new n(t);return t}n&&(o.prototype=n.prototype),e.exports=n?o:null},{}],8:[function(t,e,r){"use strict";r.byteLength=function(t){var e=h(t),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(t){var e,r,n=h(t),o=n[0],n=n[1],i=new c(function(t,e){return 3*(t+e)/4-e}(o,n)),s=0,a=0<n?o-4:o;for(r=0;r<a;r+=4)e=u[t.charCodeAt(r)]<<18|u[t.charCodeAt(r+1)]<<12|u[t.charCodeAt(r+2)]<<6|u[t.charCodeAt(r+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=255&e;2===n&&(e=u[t.charCodeAt(r)]<<2|u[t.charCodeAt(r+1)]>>4,i[s++]=255&e);1===n&&(e=u[t.charCodeAt(r)]<<10|u[t.charCodeAt(r+1)]<<4|u[t.charCodeAt(r+2)]>>2,i[s++]=e>>8&255,i[s++]=255&e);return i},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(function(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(function(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}(n));return o.join("")}(t,i,s<i+16383?s:i+16383));1==n?(e=t[r-1],o.push(a[e>>2]+a[e<<4&63]+"==")):2==n&&(e=(t[r-2]<<8)+t[r-1],o.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return o.join("")};for(var a=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=n.length;o<i;++o)a[o]=n[o],u[n.charCodeAt(o)]=o;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?e:t,t===e?0:4-t%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],9:[function(t,e,U){!function(){!function(){"use strict";var a=t("base64-js"),i=t("ieee754");U.Buffer=f,U.SlowBuffer=function(t){return f.alloc(+(t=+t!=t?0:t))},U.INSPECT_MAX_BYTES=50;var e=2147483647;function o(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return t.__proto__=f.prototype,t}function f(t,e,r){if("number"!=typeof t)return n(t,e,r);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}function n(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|p(t,e),n=o(r),e=n.write(t,e);e!==r&&(n=n.slice(0,e));return n}(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return r.__proto__=f.prototype,r}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return f.from(n,e,r);n=function(t){if(f.isBuffer(t)){var e=0|h(t.length),r=o(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(void 0!==t.length)return"number"!=typeof t.length||O(t.length)?o(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return s(t),o(t<0?0:0|h(t))}function c(t){for(var e=t.length<0?0:0|h(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function p(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return A(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return _(t).length;default:if(o)return n?-1:A(t).length;e=(""+e).toLowerCase(),o=!0}}function r(t,e,r){var n,o,i,s=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0);(!r||r<0||n<r)&&(r=n);for(var o="",i=e;i<r;++i)o+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[i]);return o}(this,e,r);case"utf8":case"utf-8":return m(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}(this,e,r);case"base64":return n=this,i=r,0===(o=e)&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function l(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=O(r=+r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=f.from(e,n)),f.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):y(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,o){var i=1,s=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=i=2,a/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var c=-1,h=r;h<s;h++)if(u(t,h)===u(e,-1===c?0:h-c)){if(h-(c=-1===c?h:c)+1===a)return c*i}else-1!==c&&(h-=h-c),c=-1;else for(h=r=s<r+a?s-a:r;0<=h;h--){for(var f=!0,p=0;p<a;p++)if(u(t,h+p)!==u(e,p)){f=!1;break}if(f)return h}return-1}function g(t,e,r,n){return C(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return C(function(t,e){for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(e,t.length-r),t,r,n)}function m(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,c=t[o],h=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(h=c);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&c)<<6|63&i)&&(h=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(h=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(h=u)}null===h?(h=65533,f=1):65535<h&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),o+=f}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}U.kMaxLength=e,(f.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=n,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(t,e,r){return e=e,r=r,s(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)},f.allocUnsafe=u,f.allocUnsafeSlow=u,f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(B(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),B(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=f.allocUnsafe(e),n=0,o=0;o<t.length;++o){var i=t[o];if(B(i,Uint8Array)&&(i=f.from(i)),!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},f.byteLength=p,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)l(this,e,e+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)l(this,e,e+3),l(this,e+1,e+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)l(this,e,e+7),l(this,e+1,e+6),l(this,e+2,e+5),l(this,e+3,e+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?m(this,0,t):r.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",e=U.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},f.prototype.compare=function(t,e,r,n,o){if(B(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=t.slice(e,r),h=0;h<a;++h)if(u[h]!==c[h]){i=u[h],s=c[h];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},f.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},f.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},f.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var o=t.length-r;(!n||o<(n=Number(n)))&&(n=o),(o=e.length)/2<n&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(O(s))return i;t[r+i]=s}return i}(this,t,e,r);case"utf8":case"utf-8":return s=e,a=r,C(A(t,(i=this).length-s),i,s,a);case"ascii":return g(this,t,e,r);case"latin1":case"binary":return g(this,t,e,r);case"base64":return i=this,s=e,a=r,C(_(t),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function v(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function w(t,e,r,n,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function T(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function S(t,e,r,n,o){return e=+e,r>>>=0,o||T(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function k(t,e,r,n,o){return e=+e,r>>>=0,o||T(t,0,r,8),i.write(t,e,r,n,52,8),r+8}function A(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function _(t){return a.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(/[^+/0-9A-Za-z-_]/g,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function C(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function O(t){return t!=t}f.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);e=this.subarray(t,e);return e.__proto__=f.prototype,e},f.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},f.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},f.prototype.readUInt8=function(t,e){return t>>>=0,e||v(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},f.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},f.prototype.readInt8=function(t,e){return t>>>=0,e||v(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||v(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt16BE=function(t,e){t>>>=0,e||v(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return t>>>=0,e||v(t,4,this.length),i.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||v(t,4,this.length),i.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||v(t,8,this.length),i.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||v(t,8,this.length),i.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||w(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},f.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||w(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},f.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||w(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},f.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||w(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},f.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},f.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||w(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeFloatLE=function(t,e,r){return S(this,t,e,!0,r)},f.prototype.writeFloatBE=function(t,e,r){return S(this,t,e,!1,r)},f.prototype.writeDoubleLE=function(t,e,r){return k(this,t,e,!0,r)},f.prototype.writeDoubleBE=function(t,e,r){return k(this,t,e,!1,r)},f.prototype.copy=function(t,e,r,n){if(!f.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var i=o-1;0<=i;--i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return o},f.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===t.length&&(o=t.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(t=o))}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(i=e;i<r;++i)this[i]=t;else{var s=f.isBuffer(t)?t:f.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this}}.call(this)}.call(this,t("buffer").Buffer)},{"base64-js":8,buffer:9,ieee754:13}],10:[function(N,t,x){!function(){!function(){"use strict";var a=N("base64-js"),i=N("ieee754"),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;x.Buffer=f,x.SlowBuffer=function(t){return f.alloc(+(t=+t!=t?0:t))},x.INSPECT_MAX_BYTES=50;var e=2147483647;function o(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return Object.setPrototypeOf(t,f.prototype),t}function f(t,e,r){if("number"!=typeof t)return n(t,e,r);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}function n(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|l(t,e),n=o(r),e=n.write(t,e);e!==r&&(n=n.slice(0,e));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(O(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(O(t,ArrayBuffer)||t&&O(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(O(t,SharedArrayBuffer)||t&&O(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return f.from(n,e,r);n=function(t){if(f.isBuffer(t)){var e=0|p(t.length),r=o(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(void 0!==t.length)return"number"!=typeof t.length||U(t.length)?o(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return s(t),o(t<0?0:0|p(t))}function c(t){for(var e=t.length<0?0:0|p(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return Object.setPrototypeOf(r,f.prototype),r}function p(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function l(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||O(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return _(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(t).length;default:if(o)return n?-1:_(t).length;e=(""+e).toLowerCase(),o=!0}}function r(t,e,r){var n,o,i,s=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0);(!r||r<0||n<r)&&(r=n);for(var o="",i=e;i<r;++i)o+=I[t[i]];return o}(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}(this,e,r);case"base64":return n=this,i=r,0===(o=e)&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=U(r=+r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=f.from(e,n)),f.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):g(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,o){var i=1,s=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=i=2,a/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var c=-1,h=r;h<s;h++)if(u(t,h)===u(e,-1===c?0:h-c)){if(h-(c=-1===c?h:c)+1===a)return c*i}else-1!==c&&(h-=h-c),c=-1;else for(h=r=s<r+a?s-a:r;0<=h;h--){for(var f=!0,p=0;p<a;p++)if(u(t,h+p)!==u(e,p)){f=!1;break}if(f)return h}return-1}function b(t,e,r,n){return B(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function m(t,e,r,n){return B(function(t,e){for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(e,t.length-r),t,r,n)}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,c=t[o],h=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(h=c);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&c)<<6|63&i)&&(h=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(h=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(h=u)}null===h?(h=65533,f=1):65535<h&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),o+=f}return function(t){var e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=v));return r}(n)}x.kMaxLength=e,(f.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=n,Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(t,e,r){return e=e,r=r,s(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)},f.allocUnsafe=u,f.allocUnsafeSlow=u,f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=f.allocUnsafe(e),n=0,o=0;o<t.length;++o){var i=t[o];if(O(i,Uint8Array))n+i.length>r.length?f.from(i).copy(r,n):Uint8Array.prototype.set.call(r,i,n);else{if(!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n)}n+=i.length}return r},f.byteLength=l,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):r.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",e=x.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},t&&(f.prototype[t]=f.prototype.inspect),f.prototype.compare=function(t,e,r,n,o){if(O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=t.slice(e,r),h=0;h<a;++h)if(u[h]!==c[h]){i=u[h],s=c[h];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},f.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},f.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},f.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var o=t.length-r;(!n||o<(n=Number(n)))&&(n=o),(o=e.length)/2<n&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(U(s))return i;t[r+i]=s}return i}(this,t,e,r);case"utf8":case"utf-8":return s=e,a=r,B(_(t,(i=this).length-s),i,s,a);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return i=this,s=e,a=r,B(C(t),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,e,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function w(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function S(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(t,e,r,n,o){return e=+e,r>>>=0,o||S(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function A(t,e,r,n,o){return e=+e,r>>>=0,o||S(t,0,r,8),i.write(t,e,r,n,52,8),r+8}function _(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function C(t){return a.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(/[^+/0-9A-Za-z-_]/g,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function O(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function U(t){return t!=t}f.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);e=this.subarray(t,e);return Object.setPrototypeOf(e,f.prototype),e},f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},f.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},f.prototype.readInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||w(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt16BE=function(t,e){t>>>=0,e||w(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||T(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},f.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||T(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},f.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},f.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeFloatLE=function(t,e,r){return k(this,t,e,!0,r)},f.prototype.writeFloatBE=function(t,e,r){return k(this,t,e,!1,r)},f.prototype.writeDoubleLE=function(t,e,r){return A(this,t,e,!0,r)},f.prototype.writeDoubleBE=function(t,e,r){return A(this,t,e,!1,r)},f.prototype.copy=function(t,e,r,n){if(!f.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=t.length-e<n-r?t.length-e+r:n)-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},f.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===t.length&&(o=t.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(t=o))}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(i=e;i<r;++i)this[i]=t;else{var s=f.isBuffer(t)?t:f.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this};var I=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)e[n+o]=t[r]+t[o];return e}()}.call(this)}.call(this,N("buffer").Buffer)},{"base64-js":8,buffer:9,ieee754:13}],11:[function(t,e){!function(k){!function(){var t=function(){"use strict";function m(t,e){return null!=e&&t instanceof e}var E,v,w;try{E=Map}catch(t){E=function(){}}try{v=Set}catch(t){v=function(){}}try{w=Promise}catch(t){w=function(){}}function T(t,l,e,d,y){"object"==typeof l&&(e=l.depth,d=l.prototype,y=l.includeNonEnumerable,l=l.circular);var g=[],b=[];return void 0===l&&(l=!0),function n(t,o){if(null===t)return null;if(0===o)return t;var r,e,i;if("object"!=typeof t)return t;if(m(t,E))r=new E;else if(m(t,v))r=new v;else if(m(t,w))r=new w(function(e,r){t.then(function(t){e(n(t,o-1))},function(t){r(n(t,o-1))})});else if(T.__isArray(t))r=[];else if(T.__isRegExp(t))r=new RegExp(t.source,S(t)),t.lastIndex&&(r.lastIndex=t.lastIndex);else if(T.__isDate(t))r=new Date(t.getTime());else{if(void 0!==k&&k.isBuffer(t))return r=new k(t.length),t.copy(r),r;m(t,Error)?r=Object.create(t):void 0===d?(e=Object.getPrototypeOf(t),r=Object.create(e)):(r=Object.create(d),e=d)}if(l){var s=g.indexOf(t);if(-1!=s)return b[s];g.push(t),b.push(r)}for(u in m(t,E)&&t.forEach(function(t,e){e=n(e,o-1),t=n(t,o-1),r.set(e,t)}),m(t,v)&&t.forEach(function(t){t=n(t,o-1),r.add(t)}),t)(i=e?Object.getOwnPropertyDescriptor(e,u):i)&&null==i.set||(r[u]=n(t[u],o-1));if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(t),u=0;u<a.length;u++){var c=a[u];(f=Object.getOwnPropertyDescriptor(t,c))&&!f.enumerable&&!y||(r[c]=n(t[c],o-1),f.enumerable||Object.defineProperty(r,c,{enumerable:!1}))}if(y)for(var h=Object.getOwnPropertyNames(t),u=0;u<h.length;u++){var f,p=h[u];(f=Object.getOwnPropertyDescriptor(t,p))&&f.enumerable||(r[p]=n(t[p],o-1),Object.defineProperty(r,p,{enumerable:!1}))}return r}(t,e=void 0===e?1/0:e)}function e(t){return Object.prototype.toString.call(t)}function S(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return T.clonePrototype=function(t){if(null===t)return null;function e(){}return e.prototype=t,new e},T.__objToStr=e,T.__isDate=function(t){return"object"==typeof t&&"[object Date]"===e(t)},T.__isArray=function(t){return"object"==typeof t&&"[object Array]"===e(t)},T.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===e(t)},T.__getRegExpFlags=S,T}();"object"==typeof e&&e.exports&&(e.exports=t)}.call(this)}.call(this,t("buffer").Buffer)},{buffer:9}],12:[function(t,e){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}void 0!==e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],13:[function(t,e,r){r.read=function(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,h=-7,f=r?o-1:0,p=r?-1:1,r=t[e+f];for(f+=p,i=r&(1<<-h)-1,r>>=-h,h+=a;0<h;i=256*i+t[e+f],f+=p,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=n;0<h;s=256*s+t[e+f],f+=p,h-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=c}return(r?-1:1)*s*Math.pow(2,i-n)},r.write=function(t,e,r,n,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,h=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,l=n?1:-1,i=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+h?f/n:f*Math.pow(2,1-h))*n&&(s++,n/=2),c<=s+h?(a=0,s=c):1<=s+h?(a=(e*n-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));8<=o;t[r+p]=255&a,p+=l,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;t[r+p]=255&s,p+=l,s/=256,u-=8);t[r+p-l]|=128*i}},{}],14:[function(t,e){"use strict";var o="An argument without append, prepend, or detach methods was given to `List";function r(){if(arguments.length)return r.from(arguments)}var n=r.prototype;function i(){}r.of=function(){return r.from.call(this,arguments)},r.from=function(t){var e,r,n,o=new this;if(t&&(e=t.length))for(r=-1;++r<e;)null!=(n=t[r])&&o.append(n);return o},n.head=null,n.tail=null,n.toArray=function(){for(var t=this.head,e=[];t;)e.push(t),t=t.next;return e},n.prepend=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(o+"#prepend`.");var e=this.head;return e?e.prepend(t):(t.detach(),(t.list=this).head=t)},n.append=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(o+"#append`.");var e=this.tail;return(e=e||this.head)?e.append(t):(t.detach(),(t.list=this).head=t)};n=(r.Item=i).prototype;n.next=null,n.prev=null,n.list=null,n.detach=function(){var t=this,e=t.list,r=t.prev,n=t.next;return e&&(e.tail===t&&(e.tail=r),e.head===t&&(e.head=n),e.tail===e.head&&(e.tail=null),r&&(r.next=n),n&&(n.prev=r),t.prev=t.next=t.list=null),t},n.prepend=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(o+"Item#prepend`.");var e=this,r=e.list,n=e.prev;return!!r&&(t.detach(),n&&((t.prev=n).next=t),t.next=e,t.list=r,e.prev=t,e===r.head&&(r.head=t),r.tail||(r.tail=e),t)},n.append=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(o+"Item#append`.");var e=this,r=e.list,n=e.next;return!!r&&(t.detach(),n&&((t.next=n).prev=t),t.prev=e,t.list=r,e.next=t,e!==r.tail&&r.tail||(r.tail=t),t)},e.exports=r},{}],15:[function(t,e){"use strict";e.exports=t("./_source/linked-list.js")},{"./_source/linked-list.js":14}],16:[function(t,e){"use strict";e.exports=function(t,e,r,n){r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;t=t.split(e=e||"&");e=1e3;n&&"number"==typeof n.maxKeys&&(e=n.maxKeys);var i=t.length;0<e&&e<i&&(i=e);for(var s=0;s<i;++s){var a,u=t[s].replace(/\+/g,"%20"),c=u.indexOf(r),c=0<=c?(a=u.substr(0,c),u.substr(c+1)):(a=u,""),u=decodeURIComponent(a),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(o,u)?h(o[u])?o[u].push(c):o[u]=[o[u],c]:o[u]=c}return o};var h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],17:[function(t,e){"use strict";function i(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(r,n,o,t){return n=n||"&",o=o||"=","object"==typeof(r=null===r?void 0:r)?a(u(r),function(t){var e=encodeURIComponent(i(t))+o;return s(r[t])?a(r[t],function(t){return e+encodeURIComponent(i(t))}).join(n):e+encodeURIComponent(i(r[t]))}).join(n):t?encodeURIComponent(i(t))+o+encodeURIComponent(i(r)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var u=Object.keys||function(t){var e,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}},{}],18:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":16,"./encode":17}],19:[function(t,e){var n=t("component-emitter"),t=function(t,e,r){n.call(this),this.PENDING="pending",this.SUBSCRIBED="subscribed",this.UNSUBSCRIBED="unsubscribed",this.name=t,this.state=this.UNSUBSCRIBED,this.client=e,this.options=r||{},this.setOptions(this.options)};(t.prototype=Object.create(n.prototype)).setOptions=function(t){this.waitForAuth=(t=t||{}).waitForAuth||!1,this.batch=t.batch||!1,void 0!==t.data&&(this.data=t.data)},t.prototype.getState=function(){return this.state},t.prototype.subscribe=function(t){this.client.subscribe(this.name,t)},t.prototype.unsubscribe=function(){this.client.unsubscribe(this.name)},t.prototype.isSubscribed=function(t){return this.client.isSubscribed(this.name,t)},t.prototype.publish=function(t,e){this.client.publish(this.name,t,e)},t.prototype.watch=function(t){this.client.watch(this.name,t)},t.prototype.unwatch=function(t){this.client.unwatch(this.name,t)},t.prototype.watchers=function(){return this.client.watchers(this.name)},t.prototype.destroy=function(){this.client.destroyChannel(this.name)},e.exports.SCChannel=t},{"component-emitter":12}],20:[function(t,e){e.exports=function(t){var s=[],a=[];return function t(e,r){var n,o,i;if("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;for(n=0;n<s.length;n+=1)if(s[n]===e)return{$ref:a[n]};if(s.push(e),a.push(r),"[object Array]"===Object.prototype.toString.apply(e))for(i=[],n=0;n<e.length;n+=1)i[n]=t(e[n],r+"["+n+"]");else for(o in i={},e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=t(e[o],r+"["+JSON.stringify(o)+"]"));return i}(t,"$")}},{}],21:[function(t,e){var o=t("./decycle"),r=function(){return!this}();function n(t,e){this.name="AuthTokenExpiredError",this.message=t,this.expiry=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function i(t){this.name="AuthTokenInvalidError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function s(t,e){this.name="AuthTokenNotBeforeError",this.message=t,this.date=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function a(t){this.name="AuthTokenError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function u(t){this.name="AuthError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function c(t,e){this.name="SilentMiddlewareBlockedError",this.message=t,this.type=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function h(t){this.name="InvalidActionError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function f(t){this.name="InvalidArgumentsError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function p(t){this.name="InvalidOptionsError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function l(t){this.name="InvalidMessageError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function d(t,e){this.name="SocketProtocolError",this.message=t,this.code=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function y(t){this.name="ServerProtocolError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function g(t){this.name="HTTPServerError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function b(t){this.name="ResourceLimitError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function m(t){this.name="TimeoutError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function E(t,e){this.name="BadConnectionError",this.message=t,this.type=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function v(t){this.name="BrokerError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function w(t,e){this.name="ProcessExitError",this.message=t,this.code=e,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}function T(t){this.name="UnknownError",this.message=t,Error.captureStackTrace&&!r?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),i.prototype=Object.create(Error.prototype),s.prototype=Object.create(Error.prototype),a.prototype=Object.create(Error.prototype),u.prototype=Object.create(Error.prototype),c.prototype=Object.create(Error.prototype),h.prototype=Object.create(Error.prototype),f.prototype=Object.create(Error.prototype),p.prototype=Object.create(Error.prototype),l.prototype=Object.create(Error.prototype),d.prototype=Object.create(Error.prototype),y.prototype=Object.create(Error.prototype),g.prototype=Object.create(Error.prototype),b.prototype=Object.create(Error.prototype),m.prototype=Object.create(Error.prototype),E.prototype=Object.create(Error.prototype),v.prototype=Object.create(Error.prototype),w.prototype=Object.create(Error.prototype),T.prototype=Object.create(Error.prototype),e.exports={AuthTokenExpiredError:n,AuthTokenInvalidError:i,AuthTokenNotBeforeError:s,AuthTokenError:a,AuthError:u,SilentMiddlewareBlockedError:c,InvalidActionError:h,InvalidArgumentsError:f,InvalidOptionsError:p,InvalidMessageError:l,SocketProtocolError:d,ServerProtocolError:y,HTTPServerError:g,ResourceLimitError:b,TimeoutError:m,BadConnectionError:E,BrokerError:v,ProcessExitError:w,UnknownError:T},e.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out",4008:"Server rejected handshake from client",4009:"Server received a message before the client handshake"},e.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"};var S={domain:1,domainEmitter:1,domainThrown:1};e.exports.dehydrateError=function(t,e){var r;if(t&&"object"==typeof t)for(var n in r={message:t.message},e&&(r.stack=t.stack),t)S[n]||(r[n]=t[n]);else r="function"==typeof t?"[function "+(t.name||"anonymous")+"]":t;return o(r)},e.exports.hydrateError=function(t){var e=null;if(null!=t)if("object"==typeof t)for(var r in e=new Error(t.message),t)t.hasOwnProperty(r)&&(e[r]=t[r]);else e=t;return e},e.exports.decycle=o},{"./decycle":20}],22:[function(t,r){!function(n){!function(){function e(t,e){if(n.ArrayBuffer&&e instanceof n.ArrayBuffer)return{base64:!0,data:function(t){for(var e=new Uint8Array(t),r=e.length,n="",o=0;o<r;o+=3)n+=i[e[o]>>2],n+=i[(3&e[o])<<4|e[o+1]>>4],n+=i[(15&e[o+1])<<2|e[o+2]>>6],n+=i[63&e[o+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n}(e)};if(n.Buffer){if(e instanceof n.Buffer)return{base64:!0,data:e.toString("base64")};if(e&&"Buffer"===e.type&&Array.isArray(e.data)){var r=n.Buffer.from?n.Buffer.from(e.data):new n.Buffer(e.data);return{base64:!0,data:r.toString("base64")}}}return e}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";r.exports.decode=function(t){if(null==t)return null;if("#1"===t||"#2"===t)return t;t=t.toString();if(!/^[ \n\r\t]*[{\[]/.test(t))return t;try{return JSON.parse(t)}catch(t){}return t},r.exports.encode=function(t){return"#1"===t||"#2"===t?t:JSON.stringify(t,e)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(t,e){var r=t("./v1"),n=t("./v4"),t=n;t.v1=r,t.v4=n,e.exports=t},{"./v1":26,"./v4":27}],24:[function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(t,e){return e=e||0,r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]}},{}],25:[function(t,e){var r,n,o="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);o?(r=new Uint8Array(16),e.exports=function(){return o(r),r}):(n=new Array(16),e.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n})},{}],26:[function(t,e){var h,f,p=t("./lib/rng"),l=t("./lib/bytesToUuid"),d=0,y=0;e.exports=function(t,e,r){var n=e&&r||0,o=e||[],i=(t=t||{}).node||h,s=void 0!==t.clockseq?t.clockseq:f;null!=i&&null!=s||(u=p(),null==i&&(i=h=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=f=16383&(u[6]<<8|u[7])));var a=void 0!==t.msecs?t.msecs:(new Date).getTime(),r=void 0!==t.nsecs?t.nsecs:y+1,u=a-d+(r-y)/1e4;if(u<0&&void 0===t.clockseq&&(s=s+1&16383),1e4<=(r=(u<0||d<a)&&void 0===t.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,f=s,r=(1e4*(268435455&(a+=122192928e5))+(y=r))%4294967296,o[n++]=r>>>24&255,o[n++]=r>>>16&255,o[n++]=r>>>8&255,o[n++]=255&r,a=a/4294967296*1e4&268435455,o[n++]=a>>>8&255,o[n++]=255&a,o[n++]=a>>>24&15|16,o[n++]=a>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var c=0;c<6;++c)o[n+c]=i[c];return e||l(o)}},{"./lib/bytesToUuid":24,"./lib/rng":25}],27:[function(t,e){var s=t("./lib/rng"),a=t("./lib/bytesToUuid");e.exports=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||a(o)}},{"./lib/bytesToUuid":24,"./lib/rng":25}]},{},[1])(1)});