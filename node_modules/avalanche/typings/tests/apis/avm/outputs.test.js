"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const buffer_1 = require("buffer/");
const bintools_1 = __importDefault(require("../../../src/utils/bintools"));
const outputs_1 = require("../../../src/apis/avm/outputs");
const output_1 = require("../../../src/common/output");
const outputs_2 = require("../../../src/apis/avm/outputs");
const avm_1 = require("../../../src/apis/avm");
const bintools = bintools_1.default.getInstance();
describe("Outputs", () => {
    const codecID_zero = 0;
    const codecID_one = 1;
    describe("NFTMintOutput", () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test("SelectOutputClass", () => {
            const goodout = new outputs_1.NFTMintOutput(0, addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.NFTMintOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test("comparator", () => {
            const outpayment1 = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            const outpayment2 = new outputs_1.NFTMintOutput(2, addrs, fallLocktime, 1);
            const outpayment3 = new outputs_1.NFTMintOutput(0, addrs, fallLocktime, 1);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test("NFTMintOutput codecIDs", () => {
            const nftMintOutput = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            expect(nftMintOutput.getCodecID()).toBe(codecID_zero);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID);
            nftMintOutput.setCodecID(codecID_one);
            expect(nftMintOutput.getCodecID()).toBe(codecID_one);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID_CODECONE);
            nftMintOutput.setCodecID(codecID_zero);
            expect(nftMintOutput.getCodecID()).toBe(codecID_zero);
            expect(nftMintOutput.getOutputID()).toBe(avm_1.AVMConstants.NFTMINTOUTPUTID);
        });
        test("Invalid NFTMintOutput codecID", () => {
            const nftMintOutput = new outputs_1.NFTMintOutput(1, addrs, fallLocktime, 1);
            expect(() => {
                nftMintOutput.setCodecID(2);
            }).toThrow("Error - NFTMintOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
        test("Functionality", () => {
            const out = new outputs_1.NFTMintOutput(0, addrs, fallLocktime, 3);
            expect(out.getOutputID()).toBe(10);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            // expect(out.getLocktime().toNumber()).toBe(locktime.toNumber())
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
    });
    describe("SECPTransferOutput", () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test("SelectOutputClass", () => {
            const goodout = new outputs_1.SECPTransferOutput(new bn_js_1.default(2600), addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.SECPTransferOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test("comparator", () => {
            const outpayment1 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            const outpayment2 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10001), addrs, locktime, 3);
            const outpayment3 = new outputs_1.SECPTransferOutput(new bn_js_1.default(9999), addrs, locktime, 3);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test("SECPTransferOutput", () => {
            const out = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(out.getOutputID()).toBe(7);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            expect(out.getAmount().toNumber()).toBe(10000);
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
        test("SECPTransferOutput codecIDs", () => {
            const secPTransferOutput = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_zero);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID);
            secPTransferOutput.setCodecID(codecID_one);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_one);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID_CODECONE);
            secPTransferOutput.setCodecID(codecID_zero);
            expect(secPTransferOutput.getCodecID()).toBe(codecID_zero);
            expect(secPTransferOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPXFEROUTPUTID);
        });
        test("Invalid SECPTransferOutput codecID", () => {
            const secPTransferOutput = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(() => {
                secPTransferOutput.setCodecID(2);
            }).toThrow("Error - SECPTransferOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
        test("SECPMintOutput", () => {
            const out = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(out.getOutputID()).toBe(6);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
        test("SECPMintOutput bad address", () => {
            const badAddress = buffer_1.Buffer.from("adfasdfsas", "hex");
            expect(() => {
                new outputs_2.SECPMintOutput([badAddress], locktime, 3);
            }).toThrow("Error - NBytes.fromBuffer: Error: Error - NBytes.fromBuffer: not enough space available in buffer.");
        });
        test("SECPMintOutput codecIDs", () => {
            const secpMintOutput = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(secpMintOutput.getCodecID()).toBe(codecID_zero);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID);
            secpMintOutput.setCodecID(codecID_one);
            expect(secpMintOutput.getCodecID()).toBe(codecID_one);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID_CODECONE);
            secpMintOutput.setCodecID(codecID_zero);
            expect(secpMintOutput.getCodecID()).toBe(codecID_zero);
            expect(secpMintOutput.getOutputID()).toBe(avm_1.AVMConstants.SECPMINTOUTPUTID);
        });
        test("Invalid SECPMintOutput codecID", () => {
            const secpMintOutput = new outputs_2.SECPMintOutput(addrs, locktime, 3);
            expect(() => {
                secpMintOutput.setCodecID(2);
            }).toThrow("Error - SECPMintOutput.setCodecID: invalid codecID. Valid codecIDs are 0 and 1.");
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0cy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9hdm0vb3V0cHV0cy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsa0RBQXNCO0FBQ3RCLG9DQUFnQztBQUNoQywyRUFBa0Q7QUFDbEQsMkRBSXNDO0FBQ3RDLHVEQUFtRDtBQUNuRCwyREFBOEQ7QUFDOUQsK0NBQW9EO0FBRXBELE1BQU0sUUFBUSxHQUFhLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7QUFFakQsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFTLEVBQUU7SUFDN0IsTUFBTSxZQUFZLEdBQVcsQ0FBQyxDQUFBO0lBQzlCLE1BQU0sV0FBVyxHQUFXLENBQUMsQ0FBQTtJQUM3QixRQUFRLENBQUMsZUFBZSxFQUFFLEdBQVMsRUFBRTtRQUNuQyxNQUFNLEtBQUssR0FBYTtZQUN0QixRQUFRLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO1lBQ3hELFFBQVEsQ0FBQyxVQUFVLENBQUMsbUNBQW1DLENBQUM7WUFDeEQsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztTQUN6RCxDQUFDLElBQUksRUFBRSxDQUFBO1FBRVIsTUFBTSxRQUFRLEdBQU8sSUFBSSxlQUFFLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDbEMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDcEMsTUFBTSxZQUFZLEdBQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBRWpELElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFTLEVBQUU7WUFDbkMsTUFBTSxPQUFPLEdBQWtCLElBQUksdUJBQWEsQ0FDOUMsQ0FBQyxFQUNELE9BQU8sRUFDUCxZQUFZLEVBQ1osQ0FBQyxDQUNGLENBQUE7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Q0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM5QixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQ1IsaUZBQWlGLENBQ2xGLENBQUE7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQk4gZnJvbSBcImJuLmpzXCJcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCJidWZmZXIvXCJcbmltcG9ydCBCaW5Ub29scyBmcm9tIFwiLi4vLi4vLi4vc3JjL3V0aWxzL2JpbnRvb2xzXCJcbmltcG9ydCB7XG4gIFNFQ1BUcmFuc2Zlck91dHB1dCxcbiAgU2VsZWN0T3V0cHV0Q2xhc3MsXG4gIE5GVE1pbnRPdXRwdXRcbn0gZnJvbSBcIi4uLy4uLy4uL3NyYy9hcGlzL2F2bS9vdXRwdXRzXCJcbmltcG9ydCB7IE91dHB1dCB9IGZyb20gXCIuLi8uLi8uLi9zcmMvY29tbW9uL291dHB1dFwiXG5pbXBvcnQgeyBTRUNQTWludE91dHB1dCB9IGZyb20gXCIuLi8uLi8uLi9zcmMvYXBpcy9hdm0vb3V0cHV0c1wiXG5pbXBvcnQgeyBBVk1Db25zdGFudHMgfSBmcm9tIFwiLi4vLi4vLi4vc3JjL2FwaXMvYXZtXCJcblxuY29uc3QgYmludG9vbHM6IEJpblRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKVxuXG5kZXNjcmliZShcIk91dHB1dHNcIiwgKCk6IHZvaWQgPT4ge1xuICBjb25zdCBjb2RlY0lEX3plcm86IG51bWJlciA9IDBcbiAgY29uc3QgY29kZWNJRF9vbmU6IG51bWJlciA9IDFcbiAgZGVzY3JpYmUoXCJORlRNaW50T3V0cHV0XCIsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBhZGRyczogQnVmZmVyW10gPSBbXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiQjZENHYxVnRQWUxiaVV2WVh0VzRQeDhvRTlpbUMydkdXXCIpLFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIlA1d2RSdVplYUR0MjhlSE1QNVMzdzlaZG9CZm83d3V6RlwiKSxcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCI2WTNreXNqRjlqbkhuWWtkUzl5R0F1b0h5YWUyZU5tZVZcIilcbiAgICBdLnNvcnQoKVxuXG4gICAgY29uc3QgbG9ja3RpbWU6IEJOID0gbmV3IEJOKDU0MzIxKVxuICAgIGNvbnN0IGFkZHJwYXkgPSBbYWRkcnNbMF0sIGFkZHJzWzFdXVxuICAgIGNvbnN0IGZhbGxMb2NrdGltZTogQk4gPSBsb2NrdGltZS5hZGQobmV3IEJOKDUwKSlcblxuICAgIHRlc3QoXCJTZWxlY3RPdXRwdXRDbGFzc1wiLCAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBnb29kb3V0OiBORlRNaW50T3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoXG4gICAgICAgIDAsXG4gICAgICAgIGFkZHJwYXksXG4gICAgICAgIGZhbGxMb2NrdGltZSxcbiAgICAgICAgMVxuICAgICAgKVxuICAgICAgY29uc3Qgb3V0cGF5bWVudDogT3V0cHV0ID0gU2VsZWN0T3V0cHV0Q2xhc3MoZ29vZG91dC5nZXRPdXRwdXRJRCgpKVxuICAgICAgZXhwZWN0KG91dHBheW1lbnQpLnRvQmVJbnN0YW5jZU9mKE5GVE1pbnRPdXRwdXQpXG4gICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICBTZWxlY3RPdXRwdXRDbGFzcyg5OSlcbiAgICAgIH0pLnRvVGhyb3coXCJFcnJvciAtIFNlbGVjdE91dHB1dENsYXNzOiB1bmtub3duIG91dHB1dGlkXCIpXG4gICAgfSlcblxuICAgIHRlc3QoXCJjb21wYXJhdG9yXCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IG91dHBheW1lbnQxOiBPdXRwdXQgPSBuZXcgTkZUTWludE91dHB1dCgxLCBhZGRycywgZmFsbExvY2t0aW1lLCAxKVxuICAgICAgY29uc3Qgb3V0cGF5bWVudDI6IE91dHB1dCA9IG5ldyBORlRNaW50T3V0cHV0KDIsIGFkZHJzLCBmYWxsTG9ja3RpbWUsIDEpXG4gICAgICBjb25zdCBvdXRwYXltZW50MzogT3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoMCwgYWRkcnMsIGZhbGxMb2NrdGltZSwgMSlcbiAgICAgIGNvbnN0IGNtcCA9IE91dHB1dC5jb21wYXJhdG9yKClcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQxKSkudG9CZSgwKVxuICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50Miwgb3V0cGF5bWVudDIpKS50b0JlKDApXG4gICAgICBleHBlY3QoY21wKG91dHBheW1lbnQzLCBvdXRwYXltZW50MykpLnRvQmUoMClcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQyKSkudG9CZSgtMSlcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQzKSkudG9CZSgxKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiTkZUTWludE91dHB1dCBjb2RlY0lEc1wiLCAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBuZnRNaW50T3V0cHV0OiBORlRNaW50T3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoXG4gICAgICAgIDEsXG4gICAgICAgIGFkZHJzLFxuICAgICAgICBmYWxsTG9ja3RpbWUsXG4gICAgICAgIDFcbiAgICAgIClcblxuICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgIGV4cGVjdChuZnRNaW50T3V0cHV0LmdldE91dHB1dElEKCkpLnRvQmUoQVZNQ29uc3RhbnRzLk5GVE1JTlRPVVRQVVRJRClcbiAgICAgIG5mdE1pbnRPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX29uZSlcbiAgICAgIGV4cGVjdChuZnRNaW50T3V0cHV0LmdldENvZGVjSUQoKSkudG9CZShjb2RlY0lEX29uZSlcbiAgICAgIGV4cGVjdChuZnRNaW50T3V0cHV0LmdldE91dHB1dElEKCkpLnRvQmUoXG4gICAgICAgIEFWTUNvbnN0YW50cy5ORlRNSU5UT1VUUFVUSURfQ09ERUNPTkVcbiAgICAgIClcbiAgICAgIG5mdE1pbnRPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX3plcm8pXG4gICAgICBleHBlY3QobmZ0TWludE91dHB1dC5nZXRDb2RlY0lEKCkpLnRvQmUoY29kZWNJRF96ZXJvKVxuICAgICAgZXhwZWN0KG5mdE1pbnRPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShBVk1Db25zdGFudHMuTkZUTUlOVE9VVFBVVElEKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiSW52YWxpZCBORlRNaW50T3V0cHV0IGNvZGVjSURcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgbmZ0TWludE91dHB1dDogTkZUTWludE91dHB1dCA9IG5ldyBORlRNaW50T3V0cHV0KFxuICAgICAgICAxLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgZmFsbExvY2t0aW1lLFxuICAgICAgICAxXG4gICAgICApXG4gICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICBuZnRNaW50T3V0cHV0LnNldENvZGVjSUQoMilcbiAgICAgIH0pLnRvVGhyb3coXG4gICAgICAgIFwiRXJyb3IgLSBORlRNaW50T3V0cHV0LnNldENvZGVjSUQ6IGludmFsaWQgY29kZWNJRC4gVmFsaWQgY29kZWNJRHMgYXJlIDAgYW5kIDEuXCJcbiAgICAgIClcbiAgICB9KVxuXG4gICAgdGVzdChcIkZ1bmN0aW9uYWxpdHlcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3Qgb3V0OiBORlRNaW50T3V0cHV0ID0gbmV3IE5GVE1pbnRPdXRwdXQoMCwgYWRkcnMsIGZhbGxMb2NrdGltZSwgMylcbiAgICAgIGV4cGVjdChvdXQuZ2V0T3V0cHV0SUQoKSkudG9CZSgxMClcbiAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShvdXQuZ2V0QWRkcmVzc2VzKCkuc29ydCgpKSkudG9TdHJpY3RFcXVhbChcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYWRkcnMuc29ydCgpKVxuICAgICAgKVxuXG4gICAgICBleHBlY3Qob3V0LmdldFRocmVzaG9sZCgpKS50b0JlKDMpXG4gICAgICAvLyBleHBlY3Qob3V0LmdldExvY2t0aW1lKCkudG9OdW1iZXIoKSkudG9CZShsb2NrdGltZS50b051bWJlcigpKVxuXG4gICAgICBjb25zdCByID0gb3V0LmdldEFkZHJlc3NJZHgoYWRkcnNbMl0pXG4gICAgICBleHBlY3Qob3V0LmdldEFkZHJlc3MocikpLnRvU3RyaWN0RXF1YWwoYWRkcnNbMl0pXG4gICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICBvdXQuZ2V0QWRkcmVzcyg0MDApXG4gICAgICB9KS50b1Rocm93KClcblxuICAgICAgY29uc3QgYjogQnVmZmVyID0gb3V0LnRvQnVmZmVyKClcbiAgICAgIGV4cGVjdChvdXQudG9TdHJpbmcoKSkudG9CZShiaW50b29scy5idWZmZXJUb0I1OChiKSlcblxuICAgICAgY29uc3QgczogQnVmZmVyW10gPSBvdXQuZ2V0U3BlbmRlcnMoYWRkcnMpXG4gICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkocy5zb3J0KCkpKS50b0JlKEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSkpXG5cbiAgICAgIGNvbnN0IG0xOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKFthZGRyc1swXV0pXG4gICAgICBleHBlY3QobTEpLnRvQmUoZmFsc2UpXG4gICAgICBjb25zdCBtMjogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycywgbmV3IEJOKDEwMCkpXG4gICAgICBleHBlY3QobTIpLnRvQmUoZmFsc2UpXG4gICAgICBjb25zdCBtMzogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycylcbiAgICAgIGV4cGVjdChtMykudG9CZSh0cnVlKVxuICAgICAgY29uc3QgbTQ6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIGxvY2t0aW1lLmFkZChuZXcgQk4oMTAwKSkpXG4gICAgICBleHBlY3QobTQpLnRvQmUodHJ1ZSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKFwiU0VDUFRyYW5zZmVyT3V0cHV0XCIsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBhZGRyczogQnVmZmVyW10gPSBbXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiQjZENHYxVnRQWUxiaVV2WVh0VzRQeDhvRTlpbUMydkdXXCIpLFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIlA1d2RSdVplYUR0MjhlSE1QNVMzdzlaZG9CZm83d3V6RlwiKSxcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCI2WTNreXNqRjlqbkhuWWtkUzl5R0F1b0h5YWUyZU5tZVZcIilcbiAgICBdLnNvcnQoKVxuXG4gICAgY29uc3QgbG9ja3RpbWU6IEJOID0gbmV3IEJOKDU0MzIxKVxuICAgIGNvbnN0IGFkZHJwYXk6IEJ1ZmZlcltdID0gW2FkZHJzWzBdLCBhZGRyc1sxXV1cbiAgICBjb25zdCBmYWxsTG9ja3RpbWU6IEJOID0gbG9ja3RpbWUuYWRkKG5ldyBCTig1MCkpXG5cbiAgICB0ZXN0KFwiU2VsZWN0T3V0cHV0Q2xhc3NcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgZ29vZG91dDogU0VDUFRyYW5zZmVyT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChcbiAgICAgICAgbmV3IEJOKDI2MDApLFxuICAgICAgICBhZGRycGF5LFxuICAgICAgICBmYWxsTG9ja3RpbWUsXG4gICAgICAgIDFcbiAgICAgIClcbiAgICAgIGNvbnN0IG91dHBheW1lbnQ6IE91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKGdvb2RvdXQuZ2V0T3V0cHV0SUQoKSlcbiAgICAgIGV4cGVjdChvdXRwYXltZW50KS50b0JlSW5zdGFuY2VPZihTRUNQVHJhbnNmZXJPdXRwdXQpXG4gICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICBTZWxlY3RPdXRwdXRDbGFzcyg5OSlcbiAgICAgIH0pLnRvVGhyb3coXCJFcnJvciAtIFNlbGVjdE91dHB1dENsYXNzOiB1bmtub3duIG91dHB1dGlkXCIpXG4gICAgfSlcblxuICAgIHRlc3QoXCJjb21wYXJhdG9yXCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IG91dHBheW1lbnQxOiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICBuZXcgQk4oMTAwMDApLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGNvbnN0IG91dHBheW1lbnQyOiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICBuZXcgQk4oMTAwMDEpLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGNvbnN0IG91dHBheW1lbnQzOiBPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICBuZXcgQk4oOTk5OSksXG4gICAgICAgIGFkZHJzLFxuICAgICAgICBsb2NrdGltZSxcbiAgICAgICAgM1xuICAgICAgKVxuICAgICAgY29uc3QgY21wID0gT3V0cHV0LmNvbXBhcmF0b3IoKVxuICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50MSwgb3V0cGF5bWVudDEpKS50b0JlKDApXG4gICAgICBleHBlY3QoY21wKG91dHBheW1lbnQyLCBvdXRwYXltZW50MikpLnRvQmUoMClcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDMsIG91dHBheW1lbnQzKSkudG9CZSgwKVxuICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50MSwgb3V0cGF5bWVudDIpKS50b0JlKC0xKVxuICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50MSwgb3V0cGF5bWVudDMpKS50b0JlKDEpXG4gICAgfSlcblxuICAgIHRlc3QoXCJTRUNQVHJhbnNmZXJPdXRwdXRcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3Qgb3V0OiBTRUNQVHJhbnNmZXJPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICBuZXcgQk4oMTAwMDApLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGV4cGVjdChvdXQuZ2V0T3V0cHV0SUQoKSkudG9CZSg3KVxuICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KG91dC5nZXRBZGRyZXNzZXMoKS5zb3J0KCkpKS50b1N0cmljdEVxdWFsKFxuICAgICAgICBKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpXG4gICAgICApXG5cbiAgICAgIGV4cGVjdChvdXQuZ2V0VGhyZXNob2xkKCkpLnRvQmUoMylcbiAgICAgIGV4cGVjdChvdXQuZ2V0TG9ja3RpbWUoKS50b051bWJlcigpKS50b0JlKGxvY2t0aW1lLnRvTnVtYmVyKCkpXG5cbiAgICAgIGNvbnN0IHI6IG51bWJlciA9IG91dC5nZXRBZGRyZXNzSWR4KGFkZHJzWzJdKVxuICAgICAgZXhwZWN0KG91dC5nZXRBZGRyZXNzKHIpKS50b1N0cmljdEVxdWFsKGFkZHJzWzJdKVxuICAgICAgZXhwZWN0KCgpOiB2b2lkID0+IHtcbiAgICAgICAgb3V0LmdldEFkZHJlc3MoNDAwKVxuICAgICAgfSkudG9UaHJvdygpXG5cbiAgICAgIGV4cGVjdChvdXQuZ2V0QW1vdW50KCkudG9OdW1iZXIoKSkudG9CZSgxMDAwMClcblxuICAgICAgY29uc3QgYjogQnVmZmVyID0gb3V0LnRvQnVmZmVyKClcbiAgICAgIGV4cGVjdChvdXQudG9TdHJpbmcoKSkudG9CZShiaW50b29scy5idWZmZXJUb0I1OChiKSlcblxuICAgICAgY29uc3QgczogQnVmZmVyW10gPSBvdXQuZ2V0U3BlbmRlcnMoYWRkcnMpXG4gICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkocy5zb3J0KCkpKS50b0JlKEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSkpXG5cbiAgICAgIGNvbnN0IG0xOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKFthZGRyc1swXV0pXG4gICAgICBleHBlY3QobTEpLnRvQmUoZmFsc2UpXG4gICAgICBjb25zdCBtMjogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycywgbmV3IEJOKDEwMCkpXG4gICAgICBleHBlY3QobTIpLnRvQmUoZmFsc2UpXG4gICAgICBjb25zdCBtMzogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycylcbiAgICAgIGV4cGVjdChtMykudG9CZSh0cnVlKVxuICAgICAgY29uc3QgbTQ6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIGxvY2t0aW1lLmFkZChuZXcgQk4oMTAwKSkpXG4gICAgICBleHBlY3QobTQpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdChcIlNFQ1BUcmFuc2Zlck91dHB1dCBjb2RlY0lEc1wiLCAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBzZWNQVHJhbnNmZXJPdXRwdXQ6IFNFQ1BUcmFuc2Zlck91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQoXG4gICAgICAgIG5ldyBCTigxMDAwMCksXG4gICAgICAgIGFkZHJzLFxuICAgICAgICBsb2NrdGltZSxcbiAgICAgICAgM1xuICAgICAgKVxuICAgICAgZXhwZWN0KHNlY1BUcmFuc2Zlck91dHB1dC5nZXRDb2RlY0lEKCkpLnRvQmUoY29kZWNJRF96ZXJvKVxuICAgICAgZXhwZWN0KHNlY1BUcmFuc2Zlck91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKFxuICAgICAgICBBVk1Db25zdGFudHMuU0VDUFhGRVJPVVRQVVRJRFxuICAgICAgKVxuICAgICAgc2VjUFRyYW5zZmVyT3V0cHV0LnNldENvZGVjSUQoY29kZWNJRF9vbmUpXG4gICAgICBleHBlY3Qoc2VjUFRyYW5zZmVyT3V0cHV0LmdldENvZGVjSUQoKSkudG9CZShjb2RlY0lEX29uZSlcbiAgICAgIGV4cGVjdChzZWNQVHJhbnNmZXJPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShcbiAgICAgICAgQVZNQ29uc3RhbnRzLlNFQ1BYRkVST1VUUFVUSURfQ09ERUNPTkVcbiAgICAgIClcbiAgICAgIHNlY1BUcmFuc2Zlck91dHB1dC5zZXRDb2RlY0lEKGNvZGVjSURfemVybylcbiAgICAgIGV4cGVjdChzZWNQVHJhbnNmZXJPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgIGV4cGVjdChzZWNQVHJhbnNmZXJPdXRwdXQuZ2V0T3V0cHV0SUQoKSkudG9CZShcbiAgICAgICAgQVZNQ29uc3RhbnRzLlNFQ1BYRkVST1VUUFVUSURcbiAgICAgIClcbiAgICB9KVxuXG4gICAgdGVzdChcIkludmFsaWQgU0VDUFRyYW5zZmVyT3V0cHV0IGNvZGVjSURcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3Qgc2VjUFRyYW5zZmVyT3V0cHV0OiBTRUNQVHJhbnNmZXJPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICBuZXcgQk4oMTAwMDApLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XG4gICAgICAgIHNlY1BUcmFuc2Zlck91dHB1dC5zZXRDb2RlY0lEKDIpXG4gICAgICB9KS50b1Rocm93KFxuICAgICAgICBcIkVycm9yIC0gU0VDUFRyYW5zZmVyT3V0cHV0LnNldENvZGVjSUQ6IGludmFsaWQgY29kZWNJRC4gVmFsaWQgY29kZWNJRHMgYXJlIDAgYW5kIDEuXCJcbiAgICAgIClcbiAgICB9KVxuXG4gICAgdGVzdChcIlNFQ1BNaW50T3V0cHV0XCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IG91dDogU0VDUE1pbnRPdXRwdXQgPSBuZXcgU0VDUE1pbnRPdXRwdXQoYWRkcnMsIGxvY2t0aW1lLCAzKVxuICAgICAgZXhwZWN0KG91dC5nZXRPdXRwdXRJRCgpKS50b0JlKDYpXG4gICAgICBleHBlY3QoSlNPTi5zdHJpbmdpZnkob3V0LmdldEFkZHJlc3NlcygpLnNvcnQoKSkpLnRvU3RyaWN0RXF1YWwoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGFkZHJzLnNvcnQoKSlcbiAgICAgIClcbiAgICAgIGV4cGVjdChvdXQuZ2V0VGhyZXNob2xkKCkpLnRvQmUoMylcbiAgICAgIGV4cGVjdChvdXQuZ2V0TG9ja3RpbWUoKS50b051bWJlcigpKS50b0JlKGxvY2t0aW1lLnRvTnVtYmVyKCkpXG4gICAgICBjb25zdCByOiBudW1iZXIgPSBvdXQuZ2V0QWRkcmVzc0lkeChhZGRyc1syXSlcbiAgICAgIGV4cGVjdChvdXQuZ2V0QWRkcmVzcyhyKSkudG9TdHJpY3RFcXVhbChhZGRyc1syXSlcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG91dC5nZXRBZGRyZXNzKDQwMClcbiAgICAgIH0pLnRvVGhyb3coKVxuICAgICAgY29uc3QgYjogQnVmZmVyID0gb3V0LnRvQnVmZmVyKClcbiAgICAgIGV4cGVjdChvdXQudG9TdHJpbmcoKSkudG9CZShiaW50b29scy5idWZmZXJUb0I1OChiKSlcbiAgICAgIGNvbnN0IHM6IEJ1ZmZlcltdID0gb3V0LmdldFNwZW5kZXJzKGFkZHJzKVxuICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KHMuc29ydCgpKSkudG9CZShKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpKVxuICAgICAgY29uc3QgbTE6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoW2FkZHJzWzBdXSlcbiAgICAgIGV4cGVjdChtMSkudG9CZShmYWxzZSlcbiAgICAgIGNvbnN0IG0yOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzLCBuZXcgQk4oMTAwKSlcbiAgICAgIGV4cGVjdChtMikudG9CZShmYWxzZSlcbiAgICAgIGNvbnN0IG0zOiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzKVxuICAgICAgZXhwZWN0KG0zKS50b0JlKHRydWUpXG4gICAgICBjb25zdCBtNDogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChhZGRycywgbG9ja3RpbWUuYWRkKG5ldyBCTigxMDApKSlcbiAgICAgIGV4cGVjdChtNCkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiU0VDUE1pbnRPdXRwdXQgYmFkIGFkZHJlc3NcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgYmFkQWRkcmVzcyA9IEJ1ZmZlci5mcm9tKFwiYWRmYXNkZnNhc1wiLCBcImhleFwiKVxuXG4gICAgICBleHBlY3QoKCk6IHZvaWQgPT4ge1xuICAgICAgICBuZXcgU0VDUE1pbnRPdXRwdXQoW2JhZEFkZHJlc3NdLCBsb2NrdGltZSwgMylcbiAgICAgIH0pLnRvVGhyb3coXG4gICAgICAgIFwiRXJyb3IgLSBOQnl0ZXMuZnJvbUJ1ZmZlcjogRXJyb3I6IEVycm9yIC0gTkJ5dGVzLmZyb21CdWZmZXI6IG5vdCBlbm91Z2ggc3BhY2UgYXZhaWxhYmxlIGluIGJ1ZmZlci5cIlxuICAgICAgKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiU0VDUE1pbnRPdXRwdXQgY29kZWNJRHNcIiwgKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3Qgc2VjcE1pbnRPdXRwdXQ6IFNFQ1BNaW50T3V0cHV0ID0gbmV3IFNFQ1BNaW50T3V0cHV0KFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGV4cGVjdChzZWNwTWludE91dHB1dC5nZXRDb2RlY0lEKCkpLnRvQmUoY29kZWNJRF96ZXJvKVxuICAgICAgZXhwZWN0KHNlY3BNaW50T3V0cHV0LmdldE91dHB1dElEKCkpLnRvQmUoQVZNQ29uc3RhbnRzLlNFQ1BNSU5UT1VUUFVUSUQpXG4gICAgICBzZWNwTWludE91dHB1dC5zZXRDb2RlY0lEKGNvZGVjSURfb25lKVxuICAgICAgZXhwZWN0KHNlY3BNaW50T3V0cHV0LmdldENvZGVjSUQoKSkudG9CZShjb2RlY0lEX29uZSlcbiAgICAgIGV4cGVjdChzZWNwTWludE91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKFxuICAgICAgICBBVk1Db25zdGFudHMuU0VDUE1JTlRPVVRQVVRJRF9DT0RFQ09ORVxuICAgICAgKVxuICAgICAgc2VjcE1pbnRPdXRwdXQuc2V0Q29kZWNJRChjb2RlY0lEX3plcm8pXG4gICAgICBleHBlY3Qoc2VjcE1pbnRPdXRwdXQuZ2V0Q29kZWNJRCgpKS50b0JlKGNvZGVjSURfemVybylcbiAgICAgIGV4cGVjdChzZWNwTWludE91dHB1dC5nZXRPdXRwdXRJRCgpKS50b0JlKEFWTUNvbnN0YW50cy5TRUNQTUlOVE9VVFBVVElEKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiSW52YWxpZCBTRUNQTWludE91dHB1dCBjb2RlY0lEXCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IHNlY3BNaW50T3V0cHV0OiBTRUNQTWludE91dHB1dCA9IG5ldyBTRUNQTWludE91dHB1dChcbiAgICAgICAgYWRkcnMsXG4gICAgICAgIGxvY2t0aW1lLFxuICAgICAgICAzXG4gICAgICApXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBzZWNwTWludE91dHB1dC5zZXRDb2RlY0lEKDIpXG4gICAgICB9KS50b1Rocm93KFxuICAgICAgICBcIkVycm9yIC0gU0VDUE1pbnRPdXRwdXQuc2V0Q29kZWNJRDogaW52YWxpZCBjb2RlY0lELiBWYWxpZCBjb2RlY0lEcyBhcmUgMCBhbmQgMS5cIlxuICAgICAgKVxuICAgIH0pXG4gIH0pXG59KVxuIl19