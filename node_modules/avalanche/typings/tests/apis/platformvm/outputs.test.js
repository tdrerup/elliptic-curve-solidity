"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bn_js_1 = __importDefault(require("bn.js"));
const bintools_1 = __importDefault(require("../../../src/utils/bintools"));
const outputs_1 = require("../../../src/apis/platformvm/outputs");
const output_1 = require("../../../src/common/output");
const bintools = bintools_1.default.getInstance();
describe("Outputs", () => {
    describe("SECPTransferOutput", () => {
        const addrs = [
            bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
            bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
            bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
        ].sort();
        const locktime = new bn_js_1.default(54321);
        const addrpay = [addrs[0], addrs[1]];
        const fallLocktime = locktime.add(new bn_js_1.default(50));
        test("SelectOutputClass", () => {
            const goodout = new outputs_1.SECPTransferOutput(new bn_js_1.default(2600), addrpay, fallLocktime, 1);
            const outpayment = outputs_1.SelectOutputClass(goodout.getOutputID());
            expect(outpayment).toBeInstanceOf(outputs_1.SECPTransferOutput);
            expect(() => {
                outputs_1.SelectOutputClass(99);
            }).toThrow("Error - SelectOutputClass: unknown outputid");
        });
        test("comparator", () => {
            const outpayment1 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            const outpayment2 = new outputs_1.SECPTransferOutput(new bn_js_1.default(10001), addrs, locktime, 3);
            const outpayment3 = new outputs_1.SECPTransferOutput(new bn_js_1.default(9999), addrs, locktime, 3);
            const cmp = output_1.Output.comparator();
            expect(cmp(outpayment1, outpayment1)).toBe(0);
            expect(cmp(outpayment2, outpayment2)).toBe(0);
            expect(cmp(outpayment3, outpayment3)).toBe(0);
            expect(cmp(outpayment1, outpayment2)).toBe(-1);
            expect(cmp(outpayment1, outpayment3)).toBe(1);
        });
        test("SECPTransferOutput", () => {
            const out = new outputs_1.SECPTransferOutput(new bn_js_1.default(10000), addrs, locktime, 3);
            expect(out.getOutputID()).toBe(7);
            expect(JSON.stringify(out.getAddresses().sort())).toStrictEqual(JSON.stringify(addrs.sort()));
            expect(out.getThreshold()).toBe(3);
            expect(out.getLocktime().toNumber()).toBe(locktime.toNumber());
            const r = out.getAddressIdx(addrs[2]);
            expect(out.getAddress(r)).toStrictEqual(addrs[2]);
            expect(() => {
                out.getAddress(400);
            }).toThrow();
            expect(out.getAmount().toNumber()).toBe(10000);
            const b = out.toBuffer();
            expect(out.toString()).toBe(bintools.bufferToB58(b));
            const s = out.getSpenders(addrs);
            expect(JSON.stringify(s.sort())).toBe(JSON.stringify(addrs.sort()));
            const m1 = out.meetsThreshold([addrs[0]]);
            expect(m1).toBe(false);
            const m2 = out.meetsThreshold(addrs, new bn_js_1.default(100));
            expect(m2).toBe(false);
            const m3 = out.meetsThreshold(addrs);
            expect(m3).toBe(true);
            const m4 = out.meetsThreshold(addrs, locktime.add(new bn_js_1.default(100)));
            expect(m4).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0cy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdGVzdHMvYXBpcy9wbGF0Zm9ybXZtL291dHB1dHMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLGtEQUFzQjtBQUV0QiwyRUFBa0Q7QUFDbEQsa0VBRzZDO0FBQzdDLHVEQUFtRDtBQUVuRCxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFBO0FBRWpELFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBUyxFQUFFO0lBQzdCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFTLEVBQUU7UUFDeEMsTUFBTSxLQUFLLEdBQWE7WUFDdEIsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztZQUN4RCxRQUFRLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO1lBQ3hELFFBQVEsQ0FBQyxVQUFVLENBQUMsbUNBQW1DLENBQUM7U0FDekQsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUVSLE1BQU0sUUFBUSxHQUFPLElBQUksZUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2xDLE1BQU0sT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sWUFBWSxHQUFPLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxlQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUVqRCxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBUyxFQUFFO1lBQ25DLE1BQU0sT0FBTyxHQUF1QixJQUFJLDRCQUFrQixDQUN4RCxJQUFJLGVBQUUsQ0FBQyxJQUFJLENBQUMsRUFDWixPQUFPLEVBQ1AsWUFBWSxFQUNaLENBQUMsQ0FDRixDQUFBO1lBQ0QsTUFBTSxVQUFVLEdBQVcsMkJBQWlCLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUE7WUFDbkUsTUFB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LEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUN4RSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3ZCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCTiBmcm9tIFwiYm4uanNcIlxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlci9cIlxuaW1wb3J0IEJpblRvb2xzIGZyb20gXCIuLi8uLi8uLi9zcmMvdXRpbHMvYmludG9vbHNcIlxuaW1wb3J0IHtcbiAgU0VDUFRyYW5zZmVyT3V0cHV0LFxuICBTZWxlY3RPdXRwdXRDbGFzc1xufSBmcm9tIFwiLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS9vdXRwdXRzXCJcbmltcG9ydCB7IE91dHB1dCB9IGZyb20gXCIuLi8uLi8uLi9zcmMvY29tbW9uL291dHB1dFwiXG5cbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKClcblxuZGVzY3JpYmUoXCJPdXRwdXRzXCIsICgpOiB2b2lkID0+IHtcbiAgZGVzY3JpYmUoXCJTRUNQVHJhbnNmZXJPdXRwdXRcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFkZHJzOiBCdWZmZXJbXSA9IFtcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUoXCJCNkQ0djFWdFBZTGJpVXZZWHRXNFB4OG9FOWltQzJ2R1dcIiksXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKFwiUDV3ZFJ1WmVhRHQyOGVITVA1UzN3OVpkb0Jmbzd3dXpGXCIpLFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIjZZM2t5c2pGOWpuSG5Za2RTOXlHQXVvSHlhZTJlTm1lVlwiKVxuICAgIF0uc29ydCgpXG5cbiAgICBjb25zdCBsb2NrdGltZTogQk4gPSBuZXcgQk4oNTQzMjEpXG4gICAgY29uc3QgYWRkcnBheSA9IFthZGRyc1swXSwgYWRkcnNbMV1dXG4gICAgY29uc3QgZmFsbExvY2t0aW1lOiBCTiA9IGxvY2t0aW1lLmFkZChuZXcgQk4oNTApKVxuXG4gICAgdGVzdChcIlNlbGVjdE91dHB1dENsYXNzXCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IGdvb2RvdXQ6IFNFQ1BUcmFuc2Zlck91dHB1dCA9IG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQoXG4gICAgICAgIG5ldyBCTigyNjAwKSxcbiAgICAgICAgYWRkcnBheSxcbiAgICAgICAgZmFsbExvY2t0aW1lLFxuICAgICAgICAxXG4gICAgICApXG4gICAgICBjb25zdCBvdXRwYXltZW50OiBPdXRwdXQgPSBTZWxlY3RPdXRwdXRDbGFzcyhnb29kb3V0LmdldE91dHB1dElEKCkpXG4gICAgICBleHBlY3Qob3V0cGF5bWVudCkudG9CZUluc3RhbmNlT2YoU0VDUFRyYW5zZmVyT3V0cHV0KVxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgU2VsZWN0T3V0cHV0Q2xhc3MoOTkpXG4gICAgICB9KS50b1Rocm93KFwiRXJyb3IgLSBTZWxlY3RPdXRwdXRDbGFzczogdW5rbm93biBvdXRwdXRpZFwiKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiY29tcGFyYXRvclwiLCAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCBvdXRwYXltZW50MTogT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChcbiAgICAgICAgbmV3IEJOKDEwMDAwKSxcbiAgICAgICAgYWRkcnMsXG4gICAgICAgIGxvY2t0aW1lLFxuICAgICAgICAzXG4gICAgICApXG4gICAgICBjb25zdCBvdXRwYXltZW50MjogT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChcbiAgICAgICAgbmV3IEJOKDEwMDAxKSxcbiAgICAgICAgYWRkcnMsXG4gICAgICAgIGxvY2t0aW1lLFxuICAgICAgICAzXG4gICAgICApXG4gICAgICBjb25zdCBvdXRwYXltZW50MzogT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChcbiAgICAgICAgbmV3IEJOKDk5OTkpLFxuICAgICAgICBhZGRycyxcbiAgICAgICAgbG9ja3RpbWUsXG4gICAgICAgIDNcbiAgICAgIClcbiAgICAgIGNvbnN0IGNtcCA9IE91dHB1dC5jb21wYXJhdG9yKClcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQxKSkudG9CZSgwKVxuICAgICAgZXhwZWN0KGNtcChvdXRwYXltZW50Miwgb3V0cGF5bWVudDIpKS50b0JlKDApXG4gICAgICBleHBlY3QoY21wKG91dHBheW1lbnQzLCBvdXRwYXltZW50MykpLnRvQmUoMClcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQyKSkudG9CZSgtMSlcbiAgICAgIGV4cGVjdChjbXAob3V0cGF5bWVudDEsIG91dHBheW1lbnQzKSkudG9CZSgxKVxuICAgIH0pXG5cbiAgICB0ZXN0KFwiU0VDUFRyYW5zZmVyT3V0cHV0XCIsICgpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IG91dDogU0VDUFRyYW5zZmVyT3V0cHV0ID0gbmV3IFNFQ1BUcmFuc2Zlck91dHB1dChcbiAgICAgICAgbmV3IEJOKDEwMDAwKSxcbiAgICAgICAgYWRkcnMsXG4gICAgICAgIGxvY2t0aW1lLFxuICAgICAgICAzXG4gICAgICApXG4gICAgICBleHBlY3Qob3V0LmdldE91dHB1dElEKCkpLnRvQmUoNylcbiAgICAgIGV4cGVjdChKU09OLnN0cmluZ2lmeShvdXQuZ2V0QWRkcmVzc2VzKCkuc29ydCgpKSkudG9TdHJpY3RFcXVhbChcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYWRkcnMuc29ydCgpKVxuICAgICAgKVxuXG4gICAgICBleHBlY3Qob3V0LmdldFRocmVzaG9sZCgpKS50b0JlKDMpXG4gICAgICBleHBlY3Qob3V0LmdldExvY2t0aW1lKCkudG9OdW1iZXIoKSkudG9CZShsb2NrdGltZS50b051bWJlcigpKVxuXG4gICAgICBjb25zdCByOiBudW1iZXIgPSBvdXQuZ2V0QWRkcmVzc0lkeChhZGRyc1syXSlcbiAgICAgIGV4cGVjdChvdXQuZ2V0QWRkcmVzcyhyKSkudG9TdHJpY3RFcXVhbChhZGRyc1syXSlcbiAgICAgIGV4cGVjdCgoKTogdm9pZCA9PiB7XG4gICAgICAgIG91dC5nZXRBZGRyZXNzKDQwMClcbiAgICAgIH0pLnRvVGhyb3coKVxuXG4gICAgICBleHBlY3Qob3V0LmdldEFtb3VudCgpLnRvTnVtYmVyKCkpLnRvQmUoMTAwMDApXG5cbiAgICAgIGNvbnN0IGI6IEJ1ZmZlciA9IG91dC50b0J1ZmZlcigpXG4gICAgICBleHBlY3Qob3V0LnRvU3RyaW5nKCkpLnRvQmUoYmludG9vbHMuYnVmZmVyVG9CNTgoYikpXG5cbiAgICAgIGNvbnN0IHM6IEJ1ZmZlcltdID0gb3V0LmdldFNwZW5kZXJzKGFkZHJzKVxuICAgICAgZXhwZWN0KEpTT04uc3RyaW5naWZ5KHMuc29ydCgpKSkudG9CZShKU09OLnN0cmluZ2lmeShhZGRycy5zb3J0KCkpKVxuXG4gICAgICBjb25zdCBtMTogYm9vbGVhbiA9IG91dC5tZWV0c1RocmVzaG9sZChbYWRkcnNbMF1dKVxuICAgICAgZXhwZWN0KG0xKS50b0JlKGZhbHNlKVxuICAgICAgY29uc3QgbTI6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMsIG5ldyBCTigxMDApKVxuICAgICAgZXhwZWN0KG0yKS50b0JlKGZhbHNlKVxuICAgICAgY29uc3QgbTM6IGJvb2xlYW4gPSBvdXQubWVldHNUaHJlc2hvbGQoYWRkcnMpXG4gICAgICBleHBlY3QobTMpLnRvQmUodHJ1ZSlcbiAgICAgIGNvbnN0IG00OiBib29sZWFuID0gb3V0Lm1lZXRzVGhyZXNob2xkKGFkZHJzLCBsb2NrdGltZS5hZGQobmV3IEJOKDEwMCkpKVxuICAgICAgZXhwZWN0KG00KS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcbn0pXG4iXX0=