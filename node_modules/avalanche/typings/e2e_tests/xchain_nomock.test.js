"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const e2etestlib_1 = require("./e2etestlib");
const api_1 = require("src/apis/keystore/api");
const bn_js_1 = __importDefault(require("bn.js"));
describe("XChain", () => {
    let tx = { value: "" };
    let asset = { value: "" };
    let addrB = { value: "" };
    let addrC = { value: "" };
    const avalanche = e2etestlib_1.getAvalanche();
    const xchain = avalanche.XChain();
    const keystore = new api_1.KeystoreAPI(avalanche);
    const user = "avalancheJsXChainUser";
    const passwd = "avalancheJsP1ssw4rd";
    const badUser = "asdfasdfsa";
    const badPass = "pass";
    const memo = "hello world";
    const whaleAddr = "X-local18jma8ppw3nhx5r4ap8clazz0dps7rv5u00z96u";
    const key = "PrivateKey-ewoqjP7PxY4yr3iLTpLisriqt94hdyDFNgchSxGGztUrTXtNN";
    // test_name        response_promise                            resp_fn          matcher           expected_value/obtained_value
    const tests_spec = [
        ["createUser", () => keystore.createUser(user, passwd), (x) => x, e2etestlib_1.Matcher.toBe, () => true],
        ["createaddrB", () => xchain.createAddress(user, passwd), (x) => x, e2etestlib_1.Matcher.Get, () => addrB],
        ["createaddrB", () => xchain.createAddress(user, passwd), (x) => x, e2etestlib_1.Matcher.Get, () => addrC],
        ["incorrectUser", () => xchain.send(badUser, passwd, "AVAX", 10, addrB.value, [addrC.value], addrB.value, memo),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => `problem retrieving user: incorrect password for user "${badUser}"`],
        ["incorrectPass", () => xchain.send(user, badPass, "AVAX", 10, addrB.value, [addrC.value], addrB.value, memo),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => `problem retrieving user: incorrect password for user "${user}"`],
        ["getBalance", () => xchain.getBalance(whaleAddr, "AVAX"), (x) => x.balance, e2etestlib_1.Matcher.toBe, () => "300000000000000000"],
        ["getBalance2", () => xchain.getBalance(whaleAddr, "AVAX"), (x) => x.utxoIDs[0].txID, e2etestlib_1.Matcher.toBe, () => "2fombhL7aGPwj3KH4bfrmJwW6PVnMobf9Y2fn9GwxiAAJyFDbe"],
        ["importKey", () => xchain.importKey(user, passwd, key), (x) => x, e2etestlib_1.Matcher.toBe, () => whaleAddr],
        ["send", () => xchain.send(user, passwd, "AVAX", 10, addrB.value, [whaleAddr], whaleAddr, memo),
            (x) => x.txID, e2etestlib_1.Matcher.Get, () => tx],
        ["sendMultiple", () => xchain.sendMultiple(user, passwd, [{ assetID: "AVAX", amount: 10, to: addrB.value }, { assetID: "AVAX", amount: 20, to: addrC.value }], [whaleAddr], whaleAddr, memo), (x) => x.txID, e2etestlib_1.Matcher.Get, () => tx],
        ["listAddrs", () => xchain.listAddresses(user, passwd), (x) => x.sort(), e2etestlib_1.Matcher.toEqual, () => [whaleAddr, addrB.value, addrC.value].sort()],
        ["exportKey", () => xchain.exportKey(user, passwd, addrB.value),
            (x) => x, e2etestlib_1.Matcher.toMatch, () => /PrivateKey-\w*/],
        ["export", () => xchain.export(user, passwd, "C" + addrB.value.substring(1), new bn_js_1.default(10), "AVAX"),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => "couldn't unmarshal an argument"],
        ["exportAVAX", () => xchain.exportAVAX(user, passwd, "C" + addrB.value.substring(1), new bn_js_1.default(10)),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => "couldn't unmarshal an argument"],
        ["import", () => xchain.import(user, passwd, addrB.value, "C"),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => "problem issuing transaction: no import inputs"],
        ["importAVAX", () => xchain.importAVAX(user, passwd, addrB.value, "P"),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => "problem issuing transaction: no import inputs"],
        ["createFixed", () => xchain.createFixedCapAsset(user, passwd, "Some Coin", "SCC", 0, [{ address: whaleAddr, amount: "10000" }]),
            (x) => x, e2etestlib_1.Matcher.Get, () => asset],
        ["createVar", () => xchain.createVariableCapAsset(user, passwd, "Some Coin", "SCC", 0, [{ minters: [whaleAddr], threshold: 1 }]),
            (x) => x, e2etestlib_1.Matcher.Get, () => asset],
        ["mint", () => xchain.mint(user, passwd, 1500, asset.value, addrB.value, [whaleAddr]),
            (x) => x, e2etestlib_1.Matcher.toThrow, () => "couldn't unmarshal an argument"],
        ["getTx", () => xchain.getTx(tx.value), (x) => x, e2etestlib_1.Matcher.toMatch, () => /\w+/],
        ["getTxStatus", () => xchain.getTxStatus(tx.value), (x) => x, e2etestlib_1.Matcher.toBe, () => "Processing"],
        ["getAssetDesc", () => xchain.getAssetDescription(asset.value), (x) => [x.name, x.symbol], e2etestlib_1.Matcher.toEqual, () => ["Some Coin", "SCC"]],
    ];
    e2etestlib_1.createTests(tests_spec);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieGNoYWluX25vbW9jay50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vZTJlX3Rlc3RzL3hjaGFpbl9ub21vY2sudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDZDQUFpRTtBQUNqRSwrQ0FBbUQ7QUFDbkQsa0RBQXNCO0FBRXRCLFFBQVEsQ0FBQyxRQUFRLEVBQUUsR0FBUyxFQUFFO0lBRTVCLElBQUksRUFBRSxHQUFHLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFBO0lBQ3BCLElBQUksS0FBSyxHQUFHLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFBO0lBQ3ZCLElBQUksS0FBSyxHQUFHLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFBO0lBQ3ZCLElBQUksS0FBSyxHQUFHLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxDQUFBO0lBRXZCLE1BQU0sU0FBUyxHQUFHLHlCQUFZLEVBQUUsQ0FBQTtJQUNoQyxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUE7SUFDakMsTUFBTSxRQUFRLEdBQUcsSUFBSSxpQkFBVyxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBRTNDLE1BQU0sSUFBSSxHQUFXLHVCQUF1QixDQUFBO0lBQzVDLE1BQU0sTUFBTSxHQUFXLHFCQUFxQixDQUFBO0lBQzVDLE1BQU0sT0FBTyxHQUFXLFlBQVksQ0FBQTtJQUNwQyxNQUFNLE9BQU8sR0FBVyxNQUFNLENBQUE7SUFDOUIsTUFBTSxJQUFJLEdBQVcsYUFBYSxDQUFBO0lBQ2xDLE1BQU0sU0FBUyxHQUFXLGdEQUFnRCxDQUFBO0lBQzFFLE1BQU0sR0FBRyxHQUFXLDhEQUE4RCxDQUFBO0lBRWxGLGdJQUFnSTtJQUNoSSxNQUFNLFVBQVUsR0FBUTtRQUN0QixDQUFDLFlBQVksRUFBSyxHQUFFLEVBQUUsQ0FBQSxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsRUFBTyxDQUFDLENB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bUIsb0JBQU8sQ0FBQyxJQUFJLEVBQU0sR0FBRSxFQUFFLENBQUEsWUFBWSxDQUFDO1FBQzFILENBQUUsY0FBYyxFQUFFLEdBQUUsRUFBRSxDQUFBLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsb0JBQU8sQ0FBQyxPQUFPLEVBQUcsR0FBRSxFQUFFLENBQUEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FFbkksQ0FBQTtJQUVELHdCQUFXLENBQUMsVUFBVSxDQUFDLENBQUE7QUFFekIsQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBdmFsYW5jaGUsIGNyZWF0ZVRlc3RzLCBNYXRjaGVyIH0gZnJvbSBcIi4vZTJldGVzdGxpYlwiXG5pbXBvcnQgeyBLZXlzdG9yZUFQSSB9IGZyb20gXCJzcmMvYXBpcy9rZXlzdG9yZS9hcGlcIlxuaW1wb3J0IEJOIGZyb20gXCJibi5qc1wiXG5cbmRlc2NyaWJlKFwiWENoYWluXCIsICgpOiB2b2lkID0+IHtcblxuICBsZXQgdHggPSB7dmFsdWU6IFwiXCJ9XG4gIGxldCBhc3NldCA9IHt2YWx1ZTogXCJcIn1cbiAgbGV0IGFkZHJCID0ge3ZhbHVlOiBcIlwifVxuICBsZXQgYWRkckMgPSB7dmFsdWU6IFwiXCJ9XG5cbiAgY29uc3QgYXZhbGFuY2hlID0gZ2V0QXZhbGFuY2hlKClcbiAgY29uc3QgeGNoYWluID0gYXZhbGFuY2hlLlhDaGFpbigpXG4gIGNvbnN0IGtleXN0b3JlID0gbmV3IEtleXN0b3JlQVBJKGF2YWxhbmNoZSlcblxuICBjb25zdCB1c2VyOiBzdHJpbmcgPSBcImF2YWxhbmNoZUpzWENoYWluVXNlclwiXG4gIGNvbnN0IHBhc3N3ZDogc3RyaW5nID0gXCJhdmFsYW5jaGVKc1Axc3N3NHJkXCJcbiAgY29uc3QgYmFkVXNlcjogc3RyaW5nID0gXCJhc2RmYXNkZnNhXCJcbiAgY29uc3QgYmFkUGFzczogc3RyaW5nID0gXCJwYXNzXCJcbiAgY29uc3QgbWVtbzogc3RyaW5nID0gXCJoZWxsbyB3b3JsZFwiXG4gIGNvbnN0IHdoYWxlQWRkcjogc3RyaW5nID0gXCJYLWxvY2FsMThqbWE4cHB3M25oeDVyNGFwOGNsYXp6MGRwczdydjV1MDB6OTZ1XCJcbiAgY29uc3Qga2V5OiBzdHJpbmcgPSBcIlByaXZhdGVLZXktZXdvcWpQN1B4WTR5cjNpTFRwTGlzcmlxdDk0aGR5REZOZ2NoU3hHR3p0VXJUWHROTlwiXG5cbiAgLy8gdGVzdF9uYW1lICAgICAgICByZXNwb25zZV9wcm9taXNlICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BfZm4gICAgICAgICAgbWF0Y2hlciAgICAgICAgICAgZXhwZWN0ZWRfdmFsdWUvb2J0YWluZWRfdmFsdWVcbiAgY29uc3QgdGVzdHNfc3BlYzogYW55ID0gW1xuICAgIFtcImNyZWF0ZVVzZXJcIiwgICAgKCk9PmtleXN0b3JlLmNyZWF0ZVVzZXIodXNlciwgcGFzc3dkKSwgICAgICAoeCk9PngsICAgICAgICAgICAgICAgICAgTWF0Y2hlci50b0JlLCAgICAgKCk9PnRydWVdLFxuICAgIFtcImNyZWF0ZWFkZHJCXCIsICAgKCk9PnhjaGFpbi5jcmVhdGVBZGRyZXNzKHVzZXIsIHBhc3N3ZCksICAgICAoeCk9PngsICAgICAgICAgICAgICAgICAgTWF0Y2hlci5HZXQsICAgICAgKCk9PmFkZHJCXSxcbiAgICBbXCJjcmVhdGVhZGRyQlwiLCAgICgpPT54Y2hhaW4uY3JlYXRlQWRkcmVzcyh1c2VyLCBwYXNzd2QpLCAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIuR2V0LCAgICAgICgpPT5hZGRyQ10sXG4gICAgW1wiaW5jb3JyZWN0VXNlclwiLCAoKT0+eGNoYWluLnNlbmQoYmFkVXNlciwgcGFzc3dkLCBcIkFWQVhcIiwgMTAsIGFkZHJCLnZhbHVlLCBbYWRkckMudmFsdWVdLCBhZGRyQi52YWx1ZSwgbWVtbyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeCk9PngsICAgICAgICAgICAgICAgICAgTWF0Y2hlci50b1Rocm93LCAgKCk9PmBwcm9ibGVtIHJldHJpZXZpbmcgdXNlcjogaW5jb3JyZWN0IHBhc3N3b3JkIGZvciB1c2VyIFwiJHtiYWRVc2VyfVwiYF0sXG4gICAgW1wiaW5jb3JyZWN0UGFzc1wiLCAoKT0+eGNoYWluLnNlbmQodXNlciwgYmFkUGFzcywgXCJBVkFYXCIsIDEwLCBhZGRyQi52YWx1ZSwgW2FkZHJDLnZhbHVlXSwgYWRkckIudmFsdWUsIG1lbW8pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIudG9UaHJvdywgICgpPT5gcHJvYmxlbSByZXRyaWV2aW5nIHVzZXI6IGluY29ycmVjdCBwYXNzd29yZCBmb3IgdXNlciBcIiR7dXNlcn1cImBdLFxuICAgIFtcImdldEJhbGFuY2VcIiwgICAgKCk9PnhjaGFpbi5nZXRCYWxhbmNlKHdoYWxlQWRkciwgXCJBVkFYXCIpLCAgICh4KT0+eC5iYWxhbmNlLCAgICAgICAgICBNYXRjaGVyLnRvQmUsICAgICAoKT0+XCIzMDAwMDAwMDAwMDAwMDAwMDBcIl0sXG4gICAgW1wiZ2V0QmFsYW5jZTJcIiwgICAoKT0+eGNoYWluLmdldEJhbGFuY2Uod2hhbGVBZGRyLCBcIkFWQVhcIiksICAgKHgpPT54LnV0eG9JRHNbMF0udHhJRCwgIE1hdGNoZXIudG9CZSwgICAgICgpPT5cIjJmb21iaEw3YUdQd2ozS0g0YmZybUp3VzZQVm5Nb2JmOVkyZm45R3d4aUFBSnlGRGJlXCJdLFxuICAgIFsgXCJpbXBvcnRLZXlcIiwgICAgKCk9PnhjaGFpbi5pbXBvcnRLZXkodXNlciwgcGFzc3dkLCBrZXkpLCAgICAoeCk9PngsICAgICAgICAgICAgICAgICAgTWF0Y2hlci50b0JlLCAgICAgKCk9PndoYWxlQWRkciBdLFxuICAgIFsgXCJzZW5kXCIsICAgICAgICAgKCk9PnhjaGFpbi5zZW5kKHVzZXIsIHBhc3N3ZCwgXCJBVkFYXCIsIDEwLCBhZGRyQi52YWx1ZSwgW3doYWxlQWRkcl0sIHdoYWxlQWRkciwgbWVtbyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LnR4SUQsICAgICAgICAgICAgIE1hdGNoZXIuR2V0LCAgICAgICgpPT50eCBdLFxuICAgIFsgXCJzZW5kTXVsdGlwbGVcIiwgKCk9PnhjaGFpbi5zZW5kTXVsdGlwbGUodXNlciwgcGFzc3dkLCBbeyBhc3NldElEOiBcIkFWQVhcIiwgYW1vdW50OiAxMCwgdG86IGFkZHJCLnZhbHVlfSwgeyBhc3NldElEOiBcIkFWQVhcIiwgYW1vdW50OiAyMCwgdG86IGFkZHJDLnZhbHVlfV0sIFt3aGFsZUFkZHJdLCB3aGFsZUFkZHIsIG1lbW8pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICh4KT0+eC50eElELCAgICAgICAgICAgICBNYXRjaGVyLkdldCwgICAgICAoKT0+dHggXSxcbiAgICBbIFwibGlzdEFkZHJzXCIsICAgICgpPT54Y2hhaW4ubGlzdEFkZHJlc3Nlcyh1c2VyLCBwYXNzd2QpLCAgICAgKHgpPT54LnNvcnQoKSwgICAgICAgICAgIE1hdGNoZXIudG9FcXVhbCwgICgpPT5bd2hhbGVBZGRyLCBhZGRyQi52YWx1ZSwgYWRkckMudmFsdWVdLnNvcnQoKSBdLFxuICAgIFsgXCJleHBvcnRLZXlcIiwgICAgKCk9PnhjaGFpbi5leHBvcnRLZXkodXNlciwgcGFzc3dkLCBhZGRyQi52YWx1ZSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIudG9NYXRjaCwgICgpPT4vUHJpdmF0ZUtleS1cXHcqLyBdLFxuICAgIFsgXCJleHBvcnRcIiwgICAgICAgKCk9PnhjaGFpbi5leHBvcnQodXNlciwgcGFzc3dkLCBcIkNcIithZGRyQi52YWx1ZS5zdWJzdHJpbmcoMSksIG5ldyBCTigxMCksIFwiQVZBWFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh4KT0+eCwgICAgICAgICAgICAgICAgICBNYXRjaGVyLnRvVGhyb3csICAoKT0+XCJjb3VsZG4ndCB1bm1hcnNoYWwgYW4gYXJndW1lbnRcIl0sXG4gICAgWyBcImV4cG9ydEFWQVhcIiwgICAoKT0+eGNoYWluLmV4cG9ydEFWQVgodXNlciwgcGFzc3dkLCBcIkNcIithZGRyQi52YWx1ZS5zdWJzdHJpbmcoMSksIG5ldyBCTigxMCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIudG9UaHJvdywgICgpPT5cImNvdWxkbid0IHVubWFyc2hhbCBhbiBhcmd1bWVudFwiXSxcbiAgICBbIFwiaW1wb3J0XCIsICAgICAgICgpPT54Y2hhaW4uaW1wb3J0KHVzZXIsIHBhc3N3ZCwgYWRkckIudmFsdWUsIFwiQ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh4KT0+eCwgICAgICAgICAgICAgICAgICBNYXRjaGVyLnRvVGhyb3csICAoKT0+XCJwcm9ibGVtIGlzc3VpbmcgdHJhbnNhY3Rpb246IG5vIGltcG9ydCBpbnB1dHNcIl0sXG4gICAgWyBcImltcG9ydEFWQVhcIiwgICAoKT0+eGNoYWluLmltcG9ydEFWQVgodXNlciwgcGFzc3dkLCBhZGRyQi52YWx1ZSwgXCJQXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIudG9UaHJvdywgICgpPT5cInByb2JsZW0gaXNzdWluZyB0cmFuc2FjdGlvbjogbm8gaW1wb3J0IGlucHV0c1wiXSxcbiAgICBbIFwiY3JlYXRlRml4ZWRcIiwgICgpPT54Y2hhaW4uY3JlYXRlRml4ZWRDYXBBc3NldCh1c2VyLCBwYXNzd2QsIFwiU29tZSBDb2luXCIsIFwiU0NDXCIsIDAsIFt7YWRkcmVzczogd2hhbGVBZGRyLCBhbW91bnQ6IFwiMTAwMDBcIn1dKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh4KT0+eCwgICAgICAgICAgICAgICAgICBNYXRjaGVyLkdldCwgICAgICAoKT0+YXNzZXRdLFxuICAgIFsgXCJjcmVhdGVWYXJcIiwgICAgKCk9PnhjaGFpbi5jcmVhdGVWYXJpYWJsZUNhcEFzc2V0KHVzZXIsIHBhc3N3ZCwgXCJTb21lIENvaW5cIiwgXCJTQ0NcIiwgMCwgW3ttaW50ZXJzOiBbd2hhbGVBZGRyXSwgdGhyZXNob2xkOiAxfV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIuR2V0LCAgICAgICgpPT5hc3NldF0sXG4gICAgWyBcIm1pbnRcIiwgICAgICAgICAoKT0+eGNoYWluLm1pbnQodXNlciwgcGFzc3dkLCAxNTAwLCBhc3NldC52YWx1ZSwgYWRkckIudmFsdWUsIFt3aGFsZUFkZHJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh4KT0+eCwgICAgICAgICAgICAgICAgICBNYXRjaGVyLnRvVGhyb3csICAoKT0+XCJjb3VsZG4ndCB1bm1hcnNoYWwgYW4gYXJndW1lbnRcIl0sXG4gICAgWyBcImdldFR4XCIsICAgICAgICAoKT0+eGNoYWluLmdldFR4KHR4LnZhbHVlKSwgICAgICAgICAgICAgICAgICh4KT0+eCwgICAgICAgICAgICAgICAgICBNYXRjaGVyLnRvTWF0Y2gsICAoKT0+L1xcdysvXSxcbiAgICBbIFwiZ2V0VHhTdGF0dXNcIiwgICgpPT54Y2hhaW4uZ2V0VHhTdGF0dXModHgudmFsdWUpLCAgICAgICAgICAgKHgpPT54LCAgICAgICAgICAgICAgICAgIE1hdGNoZXIudG9CZSwgICAgICgpPT5cIlByb2Nlc3NpbmdcIl0sXG4gICAgWyBcImdldEFzc2V0RGVzY1wiLCAoKT0+eGNoYWluLmdldEFzc2V0RGVzY3JpcHRpb24oYXNzZXQudmFsdWUpLCh4KT0+W3gubmFtZSwgeC5zeW1ib2xdLCBNYXRjaGVyLnRvRXF1YWwsICAoKT0+W1wiU29tZSBDb2luXCIsIFwiU0NDXCJdXSxcblxuICBdXG5cbiAgY3JlYXRlVGVzdHModGVzdHNfc3BlYylcblxufSlcbiJdfQ==