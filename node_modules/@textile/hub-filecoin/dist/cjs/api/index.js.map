{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/api/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { ContextInterface } from '@textile/context'\nimport { GrpcConnection } from '@textile/grpc-connection'\nimport {\n  AddressesRequest,\n  AddressesResponse,\n  AddrInfo,\n  BalanceRequest,\n  BalanceResponse,\n  CidInfo as _CidInfo,\n  CidInfoRequest,\n  CidInfoResponse,\n  CidSummary as _CidSummary,\n  CidSummaryRequest,\n  CidSummaryResponse,\n  ColdConfig as _ColdConfig,\n  ColdInfo as _ColdInfo,\n  DealError as _DealError,\n  DealInfo as _DealInfo,\n  DealRecordsConfig as _DealRecordsConfig,\n  FilConfig as _FilConfig,\n  FilInfo as _FilInfo,\n  FilRenew as _FilRenew,\n  FilStorage as _FilStorage,\n  HotConfig as _HotConfig,\n  HotInfo as _HotInfo,\n  IpfsConfig as _IpfsConfig,\n  IpfsHotInfo as _IpfsHotInfo,\n  JobStatus as _JobStatus,\n  JobStatusMap,\n  RetrievalDealInfo as _RetrievalDealInfo,\n  RetrievalDealRecord as _RetrievalDealRecord,\n  RetrievalDealRecordsRequest,\n  RetrievalDealRecordsResponse,\n  StorageConfig as _StorageConfig,\n  StorageDealRecord as _StorageDealRecord,\n  StorageDealRecordsRequest,\n  StorageDealRecordsResponse,\n  StorageInfo as _StorageInfo,\n  StorageJob as _StorageJob,\n} from '@textile/grpc-powergate-client/dist/powergate/user/v1/user_pb'\nimport { UserService } from '@textile/grpc-powergate-client/dist/powergate/user/v1/user_pb_service'\nimport log from 'loglevel'\nimport {\n  AddressInfo,\n  CidInfo,\n  CidSummary,\n  ColdConfig,\n  ColdInfo,\n  DealError,\n  DealRecordsConfig,\n  FilConfig,\n  FilInfo,\n  FilRenew,\n  FilStorage,\n  HotConfig,\n  HotInfo,\n  IpfsConfig,\n  IpfsHotInfo,\n  JobStatus,\n  RetrievalDealInfo,\n  RetrievalDealRecord,\n  StorageConfig,\n  StorageDealInfo,\n  StorageDealRecord,\n  StorageInfo,\n  StorageJob,\n} from '../types'\n\nconst logger = log.getLogger('filecoin-api')\n\nfunction fromPbAddressInfo(item: AddrInfo.AsObject): AddressInfo {\n  return {\n    ...item,\n    balance: BigInt(item.balance),\n  }\n}\n\nfunction fromPbIpfsConfig(item: _IpfsConfig.AsObject): IpfsConfig {\n  return { ...item }\n}\n\nfunction fromPbHotConfig(item: _HotConfig.AsObject): HotConfig {\n  return {\n    ...item,\n    ipfs: item.ipfs ? fromPbIpfsConfig(item.ipfs) : undefined,\n  }\n}\n\nfunction fromPbFilRenew(item: _FilRenew.AsObject): FilRenew {\n  return { ...item }\n}\n\nfunction fromPbFilConfig(item: _FilConfig.AsObject): FilConfig {\n  return {\n    ...item,\n    countryCodes: item.countryCodesList,\n    excludedMiners: item.excludedMinersList,\n    trustedMiners: item.trustedMinersList,\n    renew: item.renew ? fromPbFilRenew(item.renew) : undefined,\n  }\n}\n\nfunction fromPbColdConfig(item: _ColdConfig.AsObject): ColdConfig {\n  return {\n    ...item,\n    filecoin: item.filecoin ? fromPbFilConfig(item.filecoin) : undefined,\n  }\n}\n\nfunction fromPbStorageConfig(item: _StorageConfig.AsObject): StorageConfig {\n  return {\n    ...item,\n    cold: item.cold ? fromPbColdConfig(item.cold) : undefined,\n    hot: item.hot ? fromPbHotConfig(item.hot) : undefined,\n  }\n}\n\nfunction fromPbIpfsHotInfo(item: _IpfsHotInfo.AsObject): IpfsHotInfo {\n  return {\n    ...item,\n    // TODO: standardize time units from server.\n    created: new Date(item.created / 1000000),\n  }\n}\n\nfunction fromPbHotInfo(item: _HotInfo.AsObject): HotInfo {\n  return {\n    ...item,\n    ipfs: item.ipfs ? fromPbIpfsHotInfo(item.ipfs) : undefined,\n  }\n}\n\nfunction fromPbFilStorage(item: _FilStorage.AsObject): FilStorage {\n  return { ...item }\n}\n\nfunction fromPbFilInfo(item: _FilInfo.AsObject): FilInfo {\n  return {\n    ...item,\n    proposals: item.proposalsList.map(fromPbFilStorage),\n  }\n}\n\nfunction fromPbColdInfo(item: _ColdInfo.AsObject): ColdInfo {\n  return {\n    ...item,\n    filecoin: item.filecoin ? fromPbFilInfo(item.filecoin) : undefined,\n  }\n}\n\nfunction fromPbStorageInfo(item: _StorageInfo.AsObject): StorageInfo {\n  return {\n    ...item,\n    // TODO: standardize time units from server.\n    created: new Date(item.created / 1000000),\n    cold: item.cold ? fromPbColdInfo(item.cold) : undefined,\n    hot: item.hot ? fromPbHotInfo(item.hot) : undefined,\n  }\n}\n\nfunction fromPbDealInfo(item: _DealInfo.AsObject): StorageDealInfo {\n  return { ...item }\n}\n\nfunction fromPbDealError(item: _DealError.AsObject): DealError {\n  return { ...item }\n}\n\nfunction fromPbJobStatus(item: JobStatusMap[keyof JobStatusMap]): JobStatus {\n  switch (item) {\n    case _JobStatus.JOB_STATUS_CANCELED:\n      return JobStatus.Canceled\n    case _JobStatus.JOB_STATUS_EXECUTING:\n      return JobStatus.Executing\n    case _JobStatus.JOB_STATUS_FAILED:\n      return JobStatus.Failed\n    case _JobStatus.JOB_STATUS_QUEUED:\n      return JobStatus.Queued\n    case _JobStatus.JOB_STATUS_SUCCESS:\n      return JobStatus.Success\n    case _JobStatus.JOB_STATUS_UNSPECIFIED:\n      return JobStatus.Unspecified\n  }\n}\n\nfunction fromPbStorageJob(item: _StorageJob.AsObject): StorageJob {\n  return {\n    ...item,\n    // TODO: standardize time units from server.\n    createdAt: new Date(item.createdAt * 1000),\n    status: fromPbJobStatus(item.status),\n    dealInfo: item.dealInfoList.map(fromPbDealInfo),\n    dealErrors: item.dealErrorsList.map(fromPbDealError),\n  }\n}\n\nfunction fromPbCidSummary(item: _CidSummary.AsObject): CidSummary {\n  return {\n    ...item,\n    queuedJobs: item.queuedJobsList,\n    executingJob: item.executingJob != '' ? item.executingJob : undefined,\n  }\n}\n\nfunction fromPbCidInfo(item: _CidInfo.AsObject): CidInfo {\n  return {\n    ...item,\n    latestStorageConfig: item.latestPushedStorageConfig\n      ? fromPbStorageConfig(item.latestPushedStorageConfig)\n      : undefined,\n    currentStorageInfo: item.currentStorageInfo\n      ? fromPbStorageInfo(item.currentStorageInfo)\n      : undefined,\n    queuedStorageJobs: item.queuedStorageJobsList.map(fromPbStorageJob),\n    executingStorageJob: item.executingStorageJob\n      ? fromPbStorageJob(item.executingStorageJob)\n      : undefined,\n  }\n}\n\nfunction fromPbStorageDealRecord(\n  item: _StorageDealRecord.AsObject,\n): StorageDealRecord {\n  return {\n    ...item,\n    // TODO: standardize time units from server.\n    time: new Date(item.time * 1000),\n    dealInfo: item.dealInfo ? fromPbDealInfo(item.dealInfo) : undefined,\n  }\n}\n\nfunction fromPbRetrievalDealInfo(\n  item: _RetrievalDealInfo.AsObject,\n): RetrievalDealInfo {\n  return { ...item }\n}\n\nfunction fromPbRetrievalDealRecord(\n  item: _RetrievalDealRecord.AsObject,\n): RetrievalDealRecord {\n  return {\n    ...item,\n    // TODO: standardize time units from server.\n    time: new Date(item.time * 1000),\n    dealInfo: item.dealInfo\n      ? fromPbRetrievalDealInfo(item.dealInfo)\n      : undefined,\n  }\n}\n\n/**\n * @internal\n */\nexport async function addresses(\n  api: GrpcConnection,\n  ctx?: ContextInterface,\n): Promise<AddressInfo[]> {\n  logger.debug('addresses request')\n  const res: AddressesResponse = await api.unary(\n    UserService.Addresses,\n    new AddressesRequest(),\n    ctx,\n  )\n  return res.toObject().addressesList.map(fromPbAddressInfo)\n}\n\n/**\n * @internal\n */\nexport async function balance(\n  api: GrpcConnection,\n  address: string,\n  ctx?: ContextInterface,\n): Promise<bigint> {\n  const req = new BalanceRequest()\n  req.setAddress(address)\n  const res: BalanceResponse = await api.unary(UserService.Balance, req, ctx)\n  return BigInt(res.getBalance())\n}\n\n/**\n * @internal\n */\nexport async function cidSummary(\n  api: GrpcConnection,\n  ctx?: ContextInterface,\n  ...cids: string[]\n): Promise<CidSummary[]> {\n  const req = new CidSummaryRequest()\n  req.setCidsList(cids)\n  const res: CidSummaryResponse = await api.unary(\n    UserService.CidSummary,\n    req,\n    ctx,\n  )\n  return res.toObject().cidSummaryList.map(fromPbCidSummary)\n}\n\n/**\n * @internal\n */\nexport async function cidInfo(\n  api: GrpcConnection,\n  ctx?: ContextInterface,\n  cid?: string,\n): Promise<CidInfo> {\n  const req = new CidInfoRequest()\n  if (cid) {\n    req.setCid(cid)\n  }\n  const res: CidInfoResponse = await api.unary(UserService.CidInfo, req, ctx)\n  const info = res.toObject().cidInfo\n  if (info) {\n    return fromPbCidInfo(info)\n  } else {\n    throw new Error(\"didn't receive cid info in response\")\n  }\n}\n\n/**\n * @internal\n */\nexport async function storageDealRecords(\n  api: GrpcConnection,\n  config: DealRecordsConfig,\n  ctx?: ContextInterface,\n): Promise<StorageDealRecord[]> {\n  const c = new _DealRecordsConfig()\n  c.setAscending(config.ascending)\n  c.setDataCidsList(config.dataCids)\n  c.setFromAddrsList(config.fromAddrs)\n  c.setIncludeFinal(config.includeFinal)\n  c.setIncludePending(config.includePending)\n  const req = new StorageDealRecordsRequest()\n  req.setConfig(c)\n  const res: StorageDealRecordsResponse = await api.unary(\n    UserService.StorageDealRecords,\n    req,\n    ctx,\n  )\n  return res.toObject().recordsList.map(fromPbStorageDealRecord)\n}\n\n/**\n * @internal\n */\nexport async function retrievalDealRecords(\n  api: GrpcConnection,\n  config: DealRecordsConfig,\n  ctx?: ContextInterface,\n): Promise<RetrievalDealRecord[]> {\n  const c = new _DealRecordsConfig()\n  c.setAscending(config.ascending)\n  c.setDataCidsList(config.dataCids)\n  c.setFromAddrsList(config.fromAddrs)\n  c.setIncludeFinal(config.includeFinal)\n  c.setIncludePending(config.includePending)\n  const req = new RetrievalDealRecordsRequest()\n  req.setConfig(c)\n  const res: RetrievalDealRecordsResponse = await api.unary(\n    UserService.RetrievalDealRecords,\n    req,\n    ctx,\n  )\n  return res.toObject().recordsList.map(fromPbRetrievalDealRecord)\n}\n"]}